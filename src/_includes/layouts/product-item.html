{% extends "layouts/base.html" %}

{% block content %}

{% set heroSolutionProducts = ['User & Device Management', 'Managed Networks', 'Cloud & Systems Services', 'Professional Services', 'Cyber Security'] %}
{% set solutionProducts = heroSolutionProducts + ['Managed Helpdesk'] %}
{% set isHeroSolutionProduct = product in heroSolutionProducts %}
{% set isSolutionProduct = product in solutionProducts %}
{% set productImageMap = {
  'User & Device Management': 'user-and-device-management',
  'Managed Networks': 'managed-networks',
  'Cloud & Systems Services': 'cloud-and-systems-services',
  'Professional Services': 'professional-services',
  'Cyber Security': 'cyber-security',
  'Managed Helpdesk': 'cyber-security'
} %}
{% set productSlug = productImageMap[product] or ((product ~ '') | lower | replace(' ', '-') | replace('&', 'and') | replace(',', '')) %}

{# Hero Section #}
{% if product == 'Managed Helpdesk' %}
  {% set heroImage = '/images/products/cyber-security.webp' %}
{% else %}
  {% set heroImage = '/images/products/' + productSlug + '.webp' %}
{% endif %}
<section style="background-image: url('{{ heroImage }}');" class="product-hero relative w-full pt-32 text-white bg-center bg-no-repeat bg-cover md:pt-16">
  <div class="product-hero__overlay" aria-hidden="true"></div>
  <div class="relative w-full max-w-screen-xl mx-auto px-4 pb-20 text-left md:pb-32 md:px-8 md:py-48">
    <div class="flex gap-0">
      <span class="xflex-shrink-0">
        <h1 class="mb-4 text-3xl font-semibold tracking-tight md:text-6xl font-mont">{{ mainTitle | safe }}</h1>
        <p class="text-xl font-light md:text-2xl">{{ subtitle | safe }}</p>
      </span>
      {# <!-- <div class="relative w-full max-w-[540px] cursor-pointer" onclick="this.innerHTML='<iframe class=\'w-full h-64\' src=\'https://www.youtube.com/embed/0lmoAAFXy3A?autoplay=1&rel=0&controls=1&modestbranding=1\' frameborder=\'0\' allow=\'autoplay; encrypted-media\' allowfullscreen></iframe>'">
        <img src="/path-to-your-custom-thumbnail.jpg" alt="Custom Thumbnail" class="object-cover w-full h-64 rounded-lg">
        <div class="absolute inset-0 flex items-center justify-center bg-black border border-slate-900">
          <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z" />
          </svg>
        </div>
      </div> -->
      <!-- <div class="w-full">
        <iframe 
  width="560" 
  height="315" 
  src="https://www.youtube.com/embed/0lmoAAFXy3A?si=xnU1fO034D2kdrIj&rel=0&controls=0&modestbranding=1" 
  title="YouTube video player" 
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
  referrerpolicy="strict-origin-when-cross-origin" 
  allowfullscreen>
</iframe>
      </div> --> #}
    </div>
    <button>
      <a href="/book-appointment/" class="heroBookBtn block w-auto px-6 py-2.5 mx-auto text-lg font-semibold text-white transition-all ease-in-out bg-teal-500 rounded-full hover:bg-teal-600 mt-8">
        <div class="flex items-center gap-2">Book An Appointment <img class="heroBookArrow" src="/images/icons/ArrowUpRightWhite.svg" alt="Book An Appointment"></div>
      </a>
    </button>
  </div>
</section>


{# Main Content #}
<main class="py-24 text-white bg-black{% if isSolutionProduct %} solutionsPage{% endif %}">

  <div class="mx-auto w-full max-w-screen-xl px-4 md:px-8">
  
  <nav class="relative z-30 container flex w-full h-full max-w-screen-xl mx-auto text-slate-200 fade-item delay-0 mb-10" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
      <li class="inline-flex items-center">
        <a href="/" class="inline-flex items-center text-sm font-medium text-slate-300 hover:text-slate-500">
          <svg class="w-3 h-3 me-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z" />
          </svg>
          Home
        </a>
      </li>
      <li>
        <div class="flex items-center">
          <svg class="block w-3 h-3 mx-1 text-slate-300 rtl:rotate-180 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
          </svg>
          <a href="#" class="text-sm font-medium text-slate-300 ms-1 hover:text-slate-500 md:ms-2">Solutions</a>
        </div>
      </li>
      {% if product == 'Managed Helpdesk' %}
      <li>
        <div class="flex items-center">
          <svg class="block w-3 h-3 mx-1 text-slate-300 rtl:rotate-180 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"></path>
          </svg>
          <a href="/products/user-and-device-management/" class="text-sm font-medium text-slate-300 ms-1 hover:text-slate-500 md:ms-2">Users &amp; Devices</a>
        </div>
      </li>
      <li aria-current="page">
        <div class="flex items-center">
          <svg class="w-3 h-3 mx-1 text-slate-300 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"></path>
          </svg>
          <span class="text-sm font-medium text-teal-400 ms-1 md:ms-2">Managed Helpdesk</span>
        </div>
      </li>
      {% else %}
      <li aria-current="page">
        <div class="flex items-center">
          <svg class="w-3 h-3 mx-1 text-slate-300 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"></path>
          </svg>

          <script>
            window.navSolutions = {
              items: [
                {% for main in navSolutions.items %}
            { text: "{{ main.text | safe }}", url: "{{ main.url }}" },
            {% endfor %}
                ]
              };
          </script>
          <div x-data="{ selected: '{{ page.url }}', open: false }" class="relative">
            <button @click="open = !open" class="flex items-center justify-between w-full px-4 py-2 text-sm text-left text-teal-500 bg-transparent border-none cursor-pointer focus:outline-none">
              <span x-text="selected ? window.navSolutions.items.find(item => item.url === selected).text : 'Select a Product'"></span>
              <svg class="w-4 h-4 ml-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </button>

            <div x-ref="dropdown" x-show="open" @click.away="open = false" class="absolute z-10 md:min-w-[250px] mt-1 border rounded-md shadow-lg bg-slate-800 border-slate-800" x-init="() => {
                  $watch('open', value => {
                    if (value) {
                      anime({
                        targets: $refs.dropdown,
                        opacity: [0, 1],
                        translateY: [-10, 0],
                        duration: 300,
                        easing: 'easeOutQuad'
                      });
                    } else {
                      anime({
                        targets: $refs.dropdown,
                        opacity: [1, 0],
                        translateY: [0, -10],
                        duration: 300,
                        easing: 'easeInQuad',
                        complete: () => {
                          $refs.dropdown.style.display = 'none';
                        }
                      });
                    }
                  });
                }">
              <template x-for="main in window.navSolutions.items" :key="main.url">
                <div @click="selected = main.url; window.location.href = main.url; open = false;" class="px-4 py-2 text-sm cursor-pointer text-slate-200 hover:bg-slate-700"
                  :class="{ 'bg-slate-900': selected === main.url }">
                  <span x-text="main.text"></span>
                </div>
              </template>
            </div>
          </div>
        </div>
      </li>
      {% endif %}
    </ol>
  </nav>

  <style>
    /* Scroll reveal animations for solutions pages */
    .fade-item{
      opacity:0;
      transform:translateY(4px);
      transition:opacity .7s cubic-bezier(.3,.75,.2,1), transform .7s cubic-bezier(.3,.75,.2,1);
      will-change:opacity, transform;
    }
    .fade-item.is-visible{
      opacity:1;
      transform:translateY(0);
    }
    .fade-item.delay-0{transition-delay:0s;}
    .fade-item.delay-50{transition-delay:.05s;}
    .fade-item.delay-100{transition-delay:.1s;}
    .fade-item.delay-150{transition-delay:.15s;}
    .fade-item.delay-200{transition-delay:.2s;}
    .fade-item.delay-250{transition-delay:.25s;}
    .fade-item.delay-300{transition-delay:.3s;}
    .fade-item.delay-400{transition-delay:.4s;}
    .fade-item.delay-500{transition-delay:.5s;}
    .fade-item.delay-600{transition-delay:.6s;}
    .fade-item.delay-700{transition-delay:.7s;}
    .fade-item.delay-800{transition-delay:.8s;}
    .fade-item.delay-900{transition-delay:.9s;}
    .fade-item.delay-1200{transition-delay:1.2s;}
    .fade-item.delay-1400{transition-delay:1.4s;}
    .fade-item.delay-1600{transition-delay:1.6s;}
    .fade-item.delay-1750{transition-delay:1.75s;}
    .fade-item.delay-2000{transition-delay:2s;}
    @media (prefers-reduced-motion: reduce){
      .fade-item{
        opacity:1 !important;
        transform:none !important;
        transition:none !important;
      }
    }
  </style>

  <article class="w-full">
    {# Product Overview #}

    {# <div class="w-10 h-2 mt-24 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    {% if product == 'Managed Helpdesk' %}
    <style>
      .mhValue{
        position:relative;
        margin-top:0;
        padding:0;
      }
      .mhValue__title{
        opacity:0;
        transform:translateY(24px);
        transition:opacity .6s ease, transform .6s ease;
      }
      .mhValue__title.is-visible{
        opacity:1;
        transform:translateY(0);
      }
      .mhValue__matrix{
        position:relative;
        z-index:1;
        border:1px solid rgba(71,85,105,.65);
        border-radius:28px;
        overflow:hidden;
        background:transparent;
        box-shadow:0 30px 55px rgba(2,6,23,.65);
      }
      .mhValue__rows{
        display:flex;
        flex-direction:column;
        width:100%;
      }
      .mhValue__row{
        display:grid;
        grid-template-columns:1fr;
        align-items:stretch;
      }
      .mhValue__row + .mhValue__row{
        border-top:1px solid rgba(148,163,184,.2);
      }
      .mhValue__row--single{
        grid-template-columns:1fr;
      }
      .mhValue__card{
        padding:clamp(24px,3vw,32px);
        color:#e2e8f0;
        display:flex;
        align-items:flex-start;
        gap:18px;
        opacity:0;
        transform:translateY(26px);
        transition:opacity .65s ease, transform .65s ease;
        transition-delay:var(--mh-delay,0s);
        background:transparent;
      }
      .mhValue__card.is-visible{
        opacity:1;
        transform:translateY(0);
      }
      .mhValue__icon{
        width:48px;
        height:48px;
        flex-shrink:0;
        filter:drop-shadow(0 6px 18px rgba(45,212,191,.25));
      }
      .mhValue__heading{
        margin:0;
        font-size:1.3rem;
        font-weight:700;
        color:#5eead4;
        letter-spacing:-0.01em;
      }
      .mhValue__copy{
        margin:0;
        color:rgba(226,232,240,.78);
        line-height:1.6;
        font-size:1rem;
      }
    </style>
    {% set cardsToShow = valueProps | length %}
    {% if cardsToShow > 5 %}
      {% set cardsToShow = 5 %}
    {% endif %}
    <h3 class="mhValue__title text-xl sm:text-2xl md:text-3xl font-semibold font-mont mb-6 text-white mt-20">Why Partner with L3 Networks for Helpdesk Services</h3>
    <section class="mhValue fade-item delay-100">
      <div class="mhValue__matrix">
        <div class="mhValue__rows">
          {% for prop in valueProps %}
            {% if loop.index0 < cardsToShow %}
            <div class="mhValue__row mhValue__row--single">
              <article class="mhValue__card">
                <img src="{{ prop.icon }}" alt="{{ prop.title }}" loading="lazy" decoding="async" class="mhValue__icon">
                <div>
                  <h4 class="mhValue__heading font-mont">{{ prop.title }}</h4>
                  <p class="mhValue__copy">{{ prop.description }}</p>
                </div>
              </article>
            </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </section>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        var reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        var heading = document.querySelector('.mhValue__title');
        var items = document.querySelectorAll('.mhValue__card');
        if (reduceMotion){
          if (heading) heading.classList.add('is-visible');
          items.forEach(function(item){ item.classList.add('is-visible'); });
          return;
        }
        if (heading){
          var headingObserver = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){
              if (entry.isIntersecting){
                entry.target.classList.add('is-visible');
                headingObserver.unobserve(entry.target);
              }
            });
          }, { threshold: 0.4 });
          headingObserver.observe(heading);
        }
        if (items.length){
          items.forEach(function(item, index){
            item.style.setProperty('--mh-delay', (index * 140) + 'ms');
          });
          var itemObserver = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){
              if (entry.isIntersecting){
                entry.target.classList.add('is-visible');
                itemObserver.unobserve(entry.target);
              }
            });
          }, { threshold: 0.35, rootMargin: '0px 0px -10% 0px' });
          items.forEach(function(item){ itemObserver.observe(item); });
        }
      });
    </script>
    {% elseif isHeroSolutionProduct %}
    {% set heroAccent = '#00BBA7' %}
  <style>
    .product-hero{
      position:relative;
      color:#fff;
    }
    .product-hero__overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(180deg,
        rgba(0,0,0,.38) 0%,
        rgba(0,0,0,.68) 40%,
        rgba(0,0,0,.90) 70%,
        rgba(0,0,0,1) 100%);
      z-index:0;
    }
    .product-hero::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:-1px;
      height:160px;
      background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%);
      pointer-events:none;
      z-index:0;
    }
    .udHero{display:grid;grid-template-columns:1fr;gap:0;border:1px solid rgba(148,163,184,.28);border-radius:20px;overflow:hidden;background:#000;box-shadow:0 24px 40px rgba(0,0,0,.45);align-items:stretch;} 
    @media(min-width:1024px){.udHero{grid-template-columns:1fr 1fr;}}
    .udHero__copy{padding:28px;border-right:1px solid rgba(148,163,184,.22);display:flex;flex-direction:column;justify-content:flex-start;gap:12px;background:#000;height:100%;}
      .udHero__copy-inner{max-width:560px;}
      .udHero__title{font-size:32px;font-weight:700;margin:0 0 12px;line-height:1.15;}
      .udHero__body{color:rgba(255,255,255,.8);line-height:1.55;display:flex;flex-direction:column;gap:12px;padding:12px 0;}
      .udHero__body :where(p){margin:0;}
      .udHero__cta{color:{{ heroAccent }};border:1px solid {{ heroAccent }};border-radius:24px;padding:10px 22px;display:inline-flex;align-items:center;gap:6px;font-weight:500;text-decoration:none;width:max-content;}
      .udHero__list{display:grid;grid-template-columns:1fr;grid-auto-rows:minmax(0,1fr);align-content:stretch;align-items:stretch;background:#000;height:100%;min-height:100%;}
      .udHero__item{
        display:grid;
        grid-template-columns:auto 1fr;
        gap:16px;
        align-items:center;
        justify-content:flex-start;
        padding:16px 22px;
        border-bottom:1px solid rgba(148,163,184,.22);
        background:#000;
        height:100%;
        text-align:left;
        isolation:isolate;
        overflow:hidden;
        transition:box-shadow .18s ease, background .18s ease;
        position:relative;
      }
      .udHero__item::before{
        content:'';
        position:absolute;
        inset:0;
        background: linear-gradient(135deg, rgba(12,22,38,.26) 0%, rgba(12,22,38,.14) 45%), linear-gradient(210deg, rgba(2,6,23,.46) 0%, rgba(2,6,23,.58) 100%);
        opacity:0;
        transition:opacity .28s ease;
        z-index:0;
      }
      .udHero__item > *{position:relative; z-index:1;}
      .udHero__item img{
        transition:transform .28s ease, filter .28s ease;
        transform:none;
        filter:none;
      }
      .udHero__item h3{transition:color .25s ease;}
      .udHero__item:hover,
      .udHero__item:focus-within{
        box-shadow:
          inset 0 0 0 1px rgba(102,199,232,.30),
          0 14px 30px rgba(0,187,167,.10);
        background:#000;
      }
      .udHero__item:hover::before,
      .udHero__item:focus-within::before{
        opacity:1;
      }
      .udHero__item:hover img,
      .udHero__item:focus-within img{
        transform:scale(1.15);
        filter:drop-shadow(0 10px 22px rgba(0,187,167,.28));
      }
      .udHero__item:hover h3,
      .udHero__item:focus-within h3{
        color:#53d8cc !important;
      }
      .udHero__item img{align-self:center;justify-self:start;}
      .udHero__item:last-child{border-bottom:1px solid rgba(148,163,184,.22);}
      .udHero__list h3{color:{{ heroAccent }};font-size:18px;font-weight:700;margin:0 0 8px;}
      .udHero__list p{color:rgba(255,255,255,.75);margin:0;font-size:16px;line-height:1.55;font-weight:300;}
      @media(max-width:768px){
        .udHero__copy{align-items:flex-start;}
        .udHero__copy-inner{width:100%;}
        .udHero__cta{margin-left:0;margin-right:auto;display:none;}
      }
      @media(max-width:1023px){
        .udHero{
          border:none;
          box-shadow:none;
          gap:24px;
        }
        .udHero__copy{
          border-right:none;
          border-bottom:none;
          padding:0;
          text-align:left;
          align-items:flex-start;
        }
        .udHero__copy-inner{
          max-width:100%;
          padding-left:0;
          padding-right:0;
        }
        .udHero__copy-inner .udHero__title,
        .udHero__copy-inner .udHero__body{
          text-align:left;
        }
        .udHero__cta{
          margin-left:0;
          margin-right:auto;
        }
        .udHero__list{
          border:1px solid rgba(255,255,255,.15);
          border-radius:18px;
          overflow:hidden;
          background:#000;
        }
      }
    </style>
    <section class="fade-item delay-0 mt-16">
      <div class="udHero">
        <div class="udHero__copy">
          <div class="udHero__copy-inner">
            <h2 class="udHero__title font-mont">{{ prodtitle | safe }}</h2>
            <div class="udHero__body">{{ prodbody | safe }}</div>
          </div>
          <a href="#key-products" class="udHero__cta gap-3">
            Learn More
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M7 7l10 10"/>
              <path d="M7 17h10V7"/>
            </svg>
          </a>
        </div>
        <div class="udHero__list">
          {% for prop in valueProps %}
          <div class="udHero__item">
            <img src="{{ prop.icon }}" alt="" aria-hidden="true" loading="lazy" class="w-10 h-10 mt-1 flex-shrink-0">
            <div>
              <h3 class="font-mont">{{ prop.title }}</h3>
              <p>{{ prop.description }}</p>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
    {% else %}
    <section class="valuePropsWrap fade-item delay-0">
      <div class="valuePropsPanel">
        {% for prop in valueProps %}
        <article class="valuePropsCard fade-item delay-{{ loop.index0 * 100 }}">
          <img src="{{ prop.icon }}" alt="{{ prop.title }}" class="valuePropsIcon" aria-hidden="true" loading="lazy" decoding="async">
          <h3 class="valuePropsHeading font-mont">{{ prop.title }}</h3>
          <p class="valuePropsCopy">{{ prop.description }}</p>
        </article>
        {% endfor %}
      </div>
    </section>
    {% endif %}
    
    <div class="pt-32">&nbsp;</div>
    <div id="key-products"></div>

    {# <div class="w-10 h-2 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    <hr class="mb-20 border-slate-700">
    <div class="md:max-w-2xl fade-item delay-0" style="margin-top:12px;">
      <h2 class="mb-2 text-3xl font-semibold text-white font-mont fade-item delay-0">
        {{ keyprodsTitle | default('Solutions Designed to Keep Your Business Connected') | safe }}
      </h2>
      <p class="mb-0 text-[18px] font-light text-slate-200 fade-item delay-0">
        {{ keyprodsBody | default('We provide tailored network solutions that align with your organizationâ€™s Elevate journey. Each service strengthens visibility, performance, and reliability as your environment matures.') | safe }}
      </p>
    </div>

    {% raw %}
<style>
    .heroBookBtn{position:relative; overflow:hidden;}
    .heroBookArrow{transition:transform .22s ease;}
    .heroBookBtn:hover .heroBookArrow,
    .heroBookBtn:focus-visible .heroBookArrow{transform:translate(2px,-2px) scale(1.05);}
  #cybersec-section{background:#000;padding:clamp(20px,6vh,56px) 0 0;color:var(--ink,#fff);}
  #cybersec-section .wrap{width:100%;margin:0;padding:0!important;}
  #cybersec-section .hdr h2{font-size:clamp(24px,3vw,28px);line-height:1.15;letter-spacing:-.015em;margin:0 0 12px;font-weight:800;color:#fff;}
  #cybersec-section .hdr p{margin:0;color:rgba(255,255,255,.72);max-width:60ch;}
  #cybersec-section .content{display:grid;grid-template-columns:1fr;gap:20px;margin-top:0;width:100%;margin-left:auto;margin-right:auto;}
  #cybersec-section .filters{order:1;position:-webkit-sticky;position:sticky;top:64px;z-index:2;align-self:start;}
  #cybersec-section .filters__panel{padding:16px;border-radius:16px;background:#050505;}
  #cybersec-section .filters__panelInner{display:flex;flex-direction:column;gap:14px;}
  #cybersec-section .filters__sentinel{display:none;}
  #cybersec-section .cards{order:2;width:100%;}
  @media (min-width:1024px){
    #cybersec-section .content{
      grid-template-columns:minmax(0,2fr) minmax(280px,1fr);
      gap:32px;
      max-width:1200px;
      margin-left:auto;
      margin-right:auto;
    }
    #cybersec-section .filters{order:2;top:96px;}
    #cybersec-section .cards{order:1;padding:0;}
    #cybersec-section .filters__panel{background:rgba(0,0,0,.92);backdrop-filter:blur(8px);}
  }
  #cybersec-section .cards{display:grid;grid-template-columns:1fr;gap:16px;}
  @media (min-width:640px){#cybersec-section .cards{grid-template-columns:1fr 1fr;gap:20px;}}
  #cybersec-section .card{
    position:relative;
    background:#000;
    border:.5px solid rgba(255,255,255,.10);
    border-radius:16px;
    padding:16px;
    transition:opacity .18s ease,border-color .2s ease,box-shadow .2s ease,transform .2s ease;
  }
  #cybersec-section .card--linkable{cursor:pointer;}
  #cybersec-section .card--linkable:hover{
    border-color:rgba(0,187,167,.55);
    box-shadow:0 16px 32px rgba(0,187,167,.12);
    transform:translateY(-3px);
  }
  #cybersec-section .card--linkable:focus-within{
    border-color:rgba(0,187,167,.65);
    box-shadow:0 16px 32px rgba(0,187,167,.16);
  }
  #cybersec-section .card__linkHint{
    position:absolute;
    top:14px;
    right:16px;
    width:26px;
    height:26px;
    opacity:.65;
    transform:translate(0,0);
    transition:opacity .2s ease,transform .2s ease;
    pointer-events:none;
  }
  #cybersec-section .card__linkHint img{width:100%;height:100%;display:block;}
  #cybersec-section .card--linkable:hover .card__linkHint{opacity:1;transform:translate(-2px,2px);}
  #cybersec-section .card--match{border-width:1px;border-color:rgba(255,255,255,.40);box-shadow:0 8px 24px rgba(0,0,0,.35);}
  #cybersec-section .card__title{font-size:clamp(16px,2vw,18px);font-weight:600;letter-spacing:-.01em;margin:0;color:#fff;}
  #cybersec-section .card__titleLink{color:inherit;text-decoration:none;transition:color .2s ease;}
  #cybersec-section .card__titleLink:hover{color:#00bba7;}
  #cybersec-section .card__titleLink:focus-visible{outline:2px solid #00bba7;outline-offset:2px;border-radius:4px;}
  #cybersec-section .card__blurb{margin:8px 0 0;color:rgba(255,255,255,.72);font-size:16px;line-height:1.6;}
  #cybersec-section .card__pills{display:flex;align-items:center;gap:8px;margin-top:14px;}
  #cybersec-section .pill-dot{display:inline-flex;align-items:center;justify-content:center;transition:opacity .15s ease,background .15s ease;}
  #cybersec-section .pill-dot:not(svg){height:6px;width:10px;border-radius:999px;background:#555;}
  #cybersec-section svg.pill-dot{display:block;background:none;}
  #cybersec-section svg.pill-dot--stabilize{width:26px;height:auto;}
  #cybersec-section svg.pill-dot--optimize{width:26px;height:auto;}
  #cybersec-section svg.pill-dot--transform{width:26px;height:auto;}
  #cybersec-section .pill-dot--on.pill-dot--stabilize:not(svg){background:#ff6a3d;}
  #cybersec-section .pill-dot--on.pill-dot--optimize:not(svg){background:#3c52ff;}
  #cybersec-section .pill-dot--on.pill-dot--transform:not(svg){background:#00bba7;}
  #cybersec-section .filters__lead{color:rgba(255,255,255,.72);font-size:16px;line-height:1.6;margin:0 0 8px;}
  #cybersec-section .filters__panelInner{
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  #cybersec-section .filters__sentinel{width:100%;height:1px;margin:0;padding:0;}
  #cybersec-section .filters__group{
    display:flex;
    flex-direction:column;
    gap:14px;
    max-width:180px;
    width:100%;
    margin:0;
    align-items:flex-start;
  }
  #cybersec-section .filter-btnWrap{
    position:relative;
    width:100%;
  }
  #cybersec-section .filter-btn{
    position:relative;
    background:#000;
    border:1px solid rgba(148,163,184,.35);
    padding:15px 22px;
    display:flex;
    align-items:center;
    gap:16px;
    font-weight:600;
    font-size:17px;
    line-height:1.35;
    cursor:pointer;
    color:#fff;
    width:100%;
    max-width:200px;
    border-radius:999px;
    transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    text-transform:none;
    letter-spacing:-0.01em;
  }
  #cybersec-section .filter-btn[data-level="stabilize"]{--filter-accent:#ff6a3d;}
  #cybersec-section .filter-btn[data-level="optimize"]{--filter-accent:#3c52ff;}
  #cybersec-section .filter-btn[data-level="transform"]{--filter-accent:#00bba7;}
  #cybersec-section .filter-btn:hover,
  #cybersec-section .filter-btn:focus-visible{
    border-color:var(--filter-accent, rgba(148,163,184,.75));
    box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  #cybersec-section .filter-btnWrap[data-active="true"] .filter-btn{
    transform:translateY(-2px);
    box-shadow:0 18px 34px rgba(0,0,0,.5);
    background:#000;
    border-color:var(--filter-accent, #00bba7);
  }
  #cybersec-section .filter-btn__text{font-size:inherit;font-weight:600;}
  #cybersec-section .filter-btn__copy{
    position:absolute;
    top:50%;
    left:calc(100% + 16px);
    transform:translateY(-50%) translateX(8px);
    width:260px;
    background:#000;
    border:1px solid rgba(148,163,184,.35);
    border-radius:14px;
    padding:14px 18px;
    font-size:14px;
    color:rgba(226,232,240,.9);
    line-height:1.55;
    opacity:0;
    pointer-events:none;
    transition:opacity .2s ease, transform .2s ease;
    text-transform:none;
    letter-spacing:normal;
    text-align:left;
    font-weight:400;
    box-shadow:0 20px 40px rgba(0,0,0,.55);
    z-index:30;
  }
  #cybersec-section .filter-btn__copy::before,
  #cybersec-section .filter-btn__copy::after{display:none;}
  #cybersec-section .filter-btnWrap:hover .filter-btn__copy{
    opacity:1;
    transform:translateY(-50%) translateX(0);
  }
  @media (max-width:900px){
    #cybersec-section .filter-btn__copy{
      left:0;
      top:calc(100% + 12px);
      width:min(90vw, 340px);
      transform:none;
    }
  }
  @media (max-width:768px){
    #cybersec-section .filters{
      order:1;
      position:-webkit-sticky;
      position:sticky;
      top:56px;
      z-index:10;
      width:100vw;
      margin:0 calc(50% - 50vw) 24px;
      padding:0 16px;
    }
    #cybersec-section .wrap{
      width:100vw;
      margin-left:calc(50% - 50vw);
      margin-right:calc(50% - 50vw);
      padding:0!important;
    }
    #cybersec-section .filters__panel{
      padding:0;
      background:transparent;
      border:none;
      border-radius:0;
      box-shadow:none;
      overflow:visible;
    }
    #cybersec-section .filters__panelInner{
      display:flex;
      flex-direction:column;
      gap:14px;
      width:100%;
      min-width:0;
      background:#050505;
      border-radius:0 0 24px 24px;
      border-top:none;
      border-left:none;
      border-right:none;
      border-bottom:1px solid rgba(51,65,85,0);
      padding:16px 18px;
      box-shadow:0 20px 45px rgba(0,0,0,.7);
      transition:border-bottom-color .25s ease, box-shadow .25s ease;
      align-items:center;
    }
    #cybersec-section .filters.filters--overlap .filters__panelInner{
      border-bottom-color:rgba(148,163,184,.7);
      box-shadow:0 32px 65px rgba(0,0,0,.85);
    }
    #cybersec-section .filters__sentinel{
      display:block;
      width:100%;
      height:1px;
      order:2;
    }
    #cybersec-section .cards{
      order:3;
    }
    #cybersec-section .filters__sentinel{
      display:block;
      width:100%;
      height:1px;
      order:2;
    }
    #cybersec-section .cards{
      order:3;
    }
    #cybersec-section .filters__lead{
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:rgba(226,232,240,.65);
      text-align:center;
      margin:0;
    }
    #cybersec-section .filters__group{
      display:flex;
      flex-direction:row;
      flex-wrap:nowrap;
      gap:10px;
      align-items:stretch;
      width:100%;
      justify-content:center;
      max-width:420px;
      margin:0;
    }
    #cybersec-section .filter-btnWrap{
      width:100%;
      flex:1 1 0;
      display:flex;
    }
    #cybersec-section .filter-btn{
      width:100%;
      min-width:0;
      max-width:none;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:4px;
      padding:8px 6px;
      background:transparent;
      border:none;
      border-radius:12px;
      box-shadow:none;
    }
    #cybersec-section .filter-btn__text{
      font-size:15px;
    }
    #cybersec-section .filter-dot{
      margin-bottom:2px;
    }
    #cybersec-section .filter-btn__copy{
      position:static;
      width:auto;
      background:transparent;
      border:none;
      border-radius:0;
      box-shadow:none;
      padding:0;
      margin-top:0;
      opacity:0;
      pointer-events:none;
      transform:none;
      max-height:0;
      overflow:hidden;
      transition:max-height .25s ease, opacity .25s ease;
      color:rgba(226,232,240,.85);
      font-size:14px;
    }
    #cybersec-section .filter-btnWrap[data-active=\"true\"] .filter-btn__copy{
      opacity:1;
      pointer-events:auto;
      margin-top:10px;
      max-height:180px;
      border-top:1px solid rgba(148,163,184,.18);
      padding-top:12px;
    }
  }
  #cybersec-section .filter-dot{display:inline-flex;align-items:center;justify-content:center;}
  #cybersec-section .filter-dot:not(svg){height:6px;width:10px;border-radius:999px;}
  #cybersec-section svg.filter-dot{display:block;flex-shrink:0;}
  #cybersec-section svg.filter-dot--stabilize{width:26px;height:auto;}
  #cybersec-section svg.filter-dot--optimize{width:26px;height:auto;}
  #cybersec-section svg.filter-dot--transform{width:26px;height:auto;}
  #cybersec-section .filter-dot--stabilize rect,
  #cybersec-section .filter-dot--optimize path,
  #cybersec-section .filter-dot--transform circle{transition:fill .15s ease;}
  #cybersec-section .filter-btn[data-level="stabilize"] .filter-dot:not(svg){background:#ff6a3d;}
  #cybersec-section .filter-btn[data-level="optimize"] .filter-dot:not(svg){background:#3c52ff;}
  #cybersec-section .filter-btn[data-level="transform"] .filter-dot:not(svg){background:#00bba7;}
  #cybersec-section .cards--filtered .card{opacity:.2;}
  #cybersec-section .cards--filtered .card.card--visible{opacity:1;}
</style>
{% endraw %}
<section id="cybersec-section" aria-label="Comprehensive Cybersecurity Solutions">
  <div class="wrap">
    <div class="content">
      <div class="filters__sentinel" aria-hidden="true"></div>
      <div class="cards" id="cards" aria-live="polite"></div>
      <aside class="filters fade-item delay-200" aria-label="Service level filters">
        <div class="filters__panel">
          <div class="filters__sticky">
            <div class="filters__panelInner">
              <p class="filters__lead">All of our services are built around our Elevate framework. See where they land on your journey.</p>
              <div class="filters__group" id="filters"></div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
</section>
<script>
(function(){
  var observer = null;
  function toArray(nodes){
    if (!nodes) return [];
    if (Array.isArray(nodes)) return nodes;
    if (nodes instanceof Element) return [nodes];
    return Array.prototype.slice.call(nodes);
  }
  function ensureObserver(){
    if (observer !== null) return observer;
    if (!('IntersectionObserver' in window)){
      observer = undefined;
      return observer;
    }
    observer = new IntersectionObserver(function(entries){
      entries.forEach(function(entry){
        if (entry.isIntersecting){
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { root:null, threshold:0.18 });
    return observer;
  }
  function register(nodes){
    var elements = toArray(nodes);
    if (!elements.length) return;
    var obs = ensureObserver();
    if (!obs){
      elements.forEach(function(el){
        if (!el || el.dataset.fadeInit === '1') return;
        el.dataset.fadeInit = '1';
        el.classList.add('is-visible');
      });
      return;
    }
    elements.forEach(function(el){
      if (!el || el.dataset.fadeInit === '1') return;
      el.dataset.fadeInit = '1';
      obs.observe(el);
    });
  }
  function ready(fn){
    if (document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', fn, { once:true });
    } else {
      fn();
    }
  }
  ready(function(){
    register(document.querySelectorAll('.fade-item'));
  });
  window.registerFadeItems = register;
})();
</script>
<script>
(function(){
  var section = document.getElementById('cybersec-section');
  if (!section) return;
  var cardsEl = section.querySelector('#cards');
  var filtersEl = section.querySelector('#filters');
  var filtersWrap = section.querySelector('.filters');
  var sentinelEl = section.querySelector('.filters__sentinel');
  if (!cardsEl || !filtersEl) return;

  var RAW = {{ keyprods | dump | safe }};
  var SERVICES = Array.isArray(RAW) ? RAW.map(function(item){
    return {
      title: item.title || '',
      blurb: (item.paragraph || '').trim(),
      levels: Array.isArray(item.levels) ? item.levels : [],
      url: item.url || ''
    };
  }) : [];

  var LEVELS = [
    { key: 'stabilize', label: 'Stabilize', color: '#FF6A3D' },
    { key: 'optimize', label: 'Optimize', color: '#3C52FF' },
    { key: 'transform', label: 'Transform', color: '#00BBA7' }
  ];
  var filterRefs = [];

  var activeLevels = new Set();

  function setTooltipVisibility(tip, show){
    if (!tip) return;
    tip.setAttribute('aria-hidden', show ? 'false' : 'true');
  }

  function makePillDot(level){
    if (level === 'stabilize'){
      var stabilizeIcon = createStabilizeIcon('#525252');
      stabilizeIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return stabilizeIcon;
    }
    if (level === 'optimize'){
      var optimizeIcon = createOptimizeIcon('#525252');
      optimizeIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return optimizeIcon;
    }
    if (level === 'transform'){
      var transformIcon = createTransformIcon('#525252');
      transformIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return transformIcon;
    }

    var span = document.createElement('span');
    span.className = 'pill-dot pill-dot--' + level;
    span.setAttribute('data-level', level);
    return span;
  }

  function cardIsActive(service){
    if (!activeLevels.size) return false;
    if (activeLevels.has('transform')) return true;
    return service.levels.some(function(level){
      return activeLevels.has(level);
    });
  }

  function pillOn(level, service){
    if (!activeLevels.size) return false;
    if (activeLevels.has('transform')) return true;
    if (!cardIsActive(service)) return false;
    return activeLevels.has(level);
  }

  function setPillAppearance(dot, level, active){
    if (active){
      dot.classList.add('pill-dot--on');
    } else {
      dot.classList.remove('pill-dot--on');
    }

    if (dot.querySelectorAll){
      var fillTargets = dot.querySelectorAll('[data-fill-part]');
      if (fillTargets.length){
        var levelMeta = LEVELS.find(function(l){ return l.key === level; });
        var activeFill = levelMeta ? levelMeta.color : '#FFFFFF';
        var inactiveFill = '#525252';
        var targetColor = active ? activeFill : inactiveFill;
        fillTargets.forEach(function(part){
          part.setAttribute('fill', targetColor);
        });
      }
    }
  }

  function renderCards(){
    var selecting = activeLevels.size > 0;
    cardsEl.classList.toggle('cards--filtered', selecting);
    cardsEl.innerHTML = '';

    var newCards = [];
    SERVICES.forEach(function(service, idx){
      var active = cardIsActive(service);
      var article = document.createElement('article');
      article.className = 'card';
      article.classList.add('fade-item');
      // Only stagger on initial reveal; group two cards per interval
      if (!selecting){
        var groupDelay = Math.floor(idx / 2) * 100;
        article.style.transitionDelay = groupDelay + 'ms';
      } else {
        article.style.transitionDelay = '0ms';
      }
      if (!selecting || active){
        article.classList.add('card--visible');
      }
      if (selecting && active){
        article.classList.add('card--match');
      }
      // When filtering, skip re-triggering fade; show immediately
      if (selecting){
        article.classList.add('is-visible');
      }

      var h3 = document.createElement('h3');
      h3.className = 'card__title';
      if (service.url){
        var titleLink = document.createElement('a');
        titleLink.className = 'card__titleLink';
        titleLink.href = service.url;
        titleLink.textContent = service.title;
        titleLink.setAttribute('aria-label', service.title + ' details');
        h3.appendChild(titleLink);
      } else {
        h3.textContent = service.title;
      }

      var p = document.createElement('p');
      p.className = 'card__blurb';
      p.textContent = service.blurb;

      var pills = document.createElement('div');
      pills.className = 'card__pills';
      ['stabilize','optimize','transform'].forEach(function(level){
        var dot = makePillDot(level);
        var isActive = pillOn(level, service);
        setPillAppearance(dot, level, isActive);
        pills.appendChild(dot);
      });

      article.append(h3, p, pills);

      if (service.url){
        article.classList.add('card--linkable');
        article.setAttribute('tabindex', '0');
        article.setAttribute('role', 'link');
        var hint = document.createElement('div');
        hint.className = 'card__linkHint';
        hint.setAttribute('aria-hidden', 'true');
        hint.innerHTML = '<img src="/images/icons/ArrowUpRightTeal.svg" alt="">';
        article.appendChild(hint);

        var navigate = function(){
          window.location.href = service.url;
        };
        article.addEventListener('click', function(evt){
          if (!evt.target.closest('a')){
            navigate();
          }
        });
        article.addEventListener('keydown', function(evt){
          if (evt.key === 'Enter' || evt.key === ' '){
            evt.preventDefault();
            navigate();
          }
        });
      }

      cardsEl.appendChild(article);
      newCards.push(article);
    });
    if (!selecting && window.registerFadeItems){
      window.registerFadeItems(newCards);
    }
  }

  function createStabilizeIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '32.762');
    svg.setAttribute('viewBox', '0 0 40 32.762');
    svg.setAttribute('data-level', 'stabilize');

    var fillColor = initialFill || '#525252';
    [0, 12.1904, 24.3811].forEach(function(offset){
      var rect = document.createElementNS(svgNS, 'rect');
      rect.setAttribute('y', String(offset));
      rect.setAttribute('width', '40');
      rect.setAttribute('height', '8.38092');
      rect.setAttribute('rx', '4.19046');
      rect.setAttribute('fill', fillColor);
      rect.setAttribute('data-fill-part', '1');
      svg.appendChild(rect);
    });
    return svg;
  }

  function createOptimizeIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '39.8095');
    svg.setAttribute('viewBox', '0 0 40 39.8095');
    svg.setAttribute('data-level', 'optimize');

    var fillColor = initialFill || '#525252';
    var topPath = document.createElementNS(svgNS, 'path');
    topPath.setAttribute('d', 'M40 1.74846e-06C40 2.62644 39.4827 5.22716 38.4776 7.65367C37.4725 10.0802 35.9993 12.285 34.1421 14.1421C32.285 15.9993 30.0802 17.4725 27.6537 18.4776C25.2272 19.4827 22.6264 20 20 20C17.3736 20 14.7728 19.4827 12.3463 18.4776C9.91982 17.4725 7.71503 15.9993 5.85786 14.1421C4.00069 12.285 2.5275 10.0802 1.52241 7.65367C0.517315 5.22716 -2.2961e-07 2.62644 0 0L40 1.74846e-06Z');
    topPath.setAttribute('fill', fillColor);
    topPath.setAttribute('data-fill-part', '1');

    var bottomPath = document.createElementNS(svgNS, 'path');
    bottomPath.setAttribute('d', 'M40 19.8095C40 22.436 39.4827 25.0367 38.4776 27.4632C37.4725 29.8897 35.9993 32.0945 34.1421 33.9517C32.285 35.8088 30.0802 37.282 27.6537 38.2871C25.2272 39.2922 22.6264 39.8095 20 39.8095C17.3736 39.8095 14.7728 39.2922 12.3463 38.2871C9.91982 37.282 7.71503 35.8088 5.85786 33.9517C4.00069 32.0945 2.5275 29.8897 1.52241 27.4632C0.517315 25.0367 -2.2961e-07 22.436 0 19.8095L40 19.8095Z');
    bottomPath.setAttribute('fill', fillColor);
    bottomPath.setAttribute('data-fill-part', '1');

    svg.appendChild(topPath);
    svg.appendChild(bottomPath);
    return svg;
  }

  function createTransformIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '40');
    svg.setAttribute('viewBox', '0 0 40 40');
    svg.setAttribute('data-level', 'transform');

    var circle = document.createElementNS(svgNS, 'circle');
    circle.setAttribute('cx', '20');
    circle.setAttribute('cy', '20');
    circle.setAttribute('r', '20');
    circle.setAttribute('fill', initialFill || '#525252');
    circle.setAttribute('data-fill-part', '1');
    svg.appendChild(circle);
    return svg;
  }

  function createFilter(level){
    var wrap = document.createElement('div');
    wrap.className = 'filter-btnWrap';
    wrap.dataset.level = level.key;

    var btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'filter-btn';
    btn.dataset.level = level.key;
    btn.setAttribute('aria-pressed', 'false');

    var dot;
    if (level.key === 'stabilize'){
      dot = createStabilizeIcon(level.color);
      dot.classList.add('filter-dot', 'filter-dot--stabilize');
    } else if (level.key === 'optimize'){
      dot = createOptimizeIcon(level.color);
      dot.classList.add('filter-dot', 'filter-dot--optimize');
    } else if (level.key === 'transform'){
      dot = createTransformIcon(level.color);
      dot.classList.add('filter-dot', 'filter-dot--transform');
    } else {
      dot = document.createElement('span');
      dot.className = 'filter-dot';
      dot.style.background = level.color;
    }
    dot.setAttribute('aria-hidden', 'true');

    var text = document.createElement('span');
    text.className = 'filter-btn__text';
    text.textContent = level.label;
    btn.append(dot, text);

    var focusCopy = {
      stabilize: 'Focus: establish secure, reliable, and visible connectivity foundations.',
      optimize: 'Focus: streamline operations, automation, and productivity.',
      transform: 'Focus: strategic automation, unified management, and workforce intelligence.'
    };

    var tipText = focusCopy[level.key];
    var tip = null;
    if (tipText){
      tip = document.createElement('div');
      tip.className = 'filter-btn__copy';
      tip.setAttribute('role', 'tooltip');
      tip.setAttribute('aria-hidden', 'true');
      var focusLabel = document.createElement('strong');
      focusLabel.textContent = 'Focus:';
      var focusBody = document.createElement('span');
      focusBody.textContent = ' ' + tipText.replace(/^Focus:\s*/i, '');
      tip.append(focusLabel, focusBody);
      btn.appendChild(tip);
    }

    wrap.appendChild(btn);
    filtersEl.appendChild(wrap);
    filterRefs.push({ level: level.key, wrap: wrap, btn: btn, tip: tip });

    if (tip){
      wrap.addEventListener('mouseenter', function(){
        setTooltipVisibility(tip, true);
      });
      wrap.addEventListener('mouseleave', function(){
        setTooltipVisibility(tip, false);
      });
    }
  }

  function initFilters(){
    filtersEl.innerHTML = '';
    filterRefs = [];
    LEVELS.forEach(createFilter);
    updateFilters();
  }

  function updateFilters(){
    filterRefs.forEach(function(ref){
      var isActive = activeLevels.has(ref.level);
      ref.btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      if (ref.wrap){
        ref.wrap.setAttribute('data-active', isActive ? 'true' : 'false');
      }
    });
  }

  function toggleLevel(level){
    if (level === 'transform'){
      if (activeLevels.has('transform')){
        activeLevels.clear();
      } else {
        activeLevels = new Set(LEVELS.map(function(l){ return l.key; }));
      }
    } else {
      activeLevels.delete('transform');
      if (activeLevels.has(level)){
        activeLevels.delete(level);
        if (level === 'stabilize' && activeLevels.has('optimize')){
          activeLevels.delete('optimize');
        }
        if (level === 'optimize' && activeLevels.has('stabilize')){
          activeLevels.delete('stabilize');
        }
      } else {
        if (level === 'stabilize'){
          activeLevels.clear();
          activeLevels.add('stabilize');
        } else if (level === 'optimize'){
          activeLevels.add('stabilize');
          activeLevels.add('optimize');
        } else {
          activeLevels.add(level);
        }
      }
    }
    updateFilters();
    renderCards();
  }

  function setupStickyBorder(){
    if (!filtersWrap || !sentinelEl || !window.matchMedia) return;
    var mq = window.matchMedia('(max-width: 768px)');
    var observer = null;
    function applyObserver(){
      if (observer){
        observer.disconnect();
        observer = null;
      }
      filtersWrap.classList.remove('filters--overlap');
      if (!mq.matches) return;
      var topOffset = filtersWrap.offsetHeight || 120;
      var stickyOffset = 0;
      var computedTop = window.getComputedStyle(filtersWrap).top;
      if (computedTop) {
        var parsed = parseInt(computedTop, 10);
        if (!isNaN(parsed)) stickyOffset = parsed;
      }
      var margin = `-${topOffset + stickyOffset}px 0px 0px 0px`;
      observer = new IntersectionObserver(function(entries){
        entries.forEach(function(entry){
          filtersWrap.classList.toggle('filters--overlap', !entry.isIntersecting);
        });
      }, { threshold:0, rootMargin:margin });
      observer.observe(sentinelEl);
    }
    if (mq.addEventListener){
      mq.addEventListener('change', applyObserver);
    } else if (mq.addListener){
      mq.addListener(applyObserver);
    }
    applyObserver();
  }

  filtersEl.addEventListener('click', function(evt){
    var wrap = evt.target.closest('.filter-btnWrap');
    if (!wrap || !filtersEl.contains(wrap)) return;
    toggleLevel(wrap.getAttribute('data-level'));
  });

  initFilters();
  renderCards();
  setupStickyBorder();
})();
</script>










    {# Optional proof section (moved below Key Products) #}
    <div class="pt-32">&nbsp;</div>
    {% if proof and proof.enabled %}
    {% if product == 'Managed Helpdesk' %}
    <section id="helpdesk-impact" class="helpdeskImpactLegacy">
      <div class="helpdeskImpactLegacy__shell">
        <div class="helpdeskImpactLegacy__intro">
          <h2>The Business Impact of a Structured Helpdesk</h2>
          <p>Organizations that adopt structured helpdesk operations experience measurable improvement in performance and user satisfaction:</p>
          <ul class="helpdeskImpactLegacy__list">
            <li>Up to 30% faster issue resolution through streamlined processes</li>
            <li>Higher user satisfaction scores supported by quality tracking</li>
            <li>Reduced downtime with continuous coverage and proactive management</li>
            <li>Improved operational insight through trend analysis and transparent reporting</li>
          </ul>
          <p>Predictable service delivery leads to measurable business continuity and employee productivity gains.</p>
        </div>
        <div class="helpdeskImpactLegacy__grid">
          <article class="helpdeskImpactLegacy__card">
            <span class="helpdeskImpactLegacy__icon" aria-hidden="true">
              <img src="/images/home/icons/teal/ClockClockwise.svg" alt="" loading="lazy" decoding="async">
            </span>
            <h3><strong>Up to 30% faster issue resolution</strong> through streamlined processes</h3>
          </article>
          <article class="helpdeskImpactLegacy__card">
            <span class="helpdeskImpactLegacy__icon" aria-hidden="true">
              <img src="/images/home/icons/teal/ThumbsUp.svg" alt="" loading="lazy" decoding="async">
            </span>
            <h3><strong>Higher user satisfaction scores</strong> supported by quality tracking</h3>
          </article>
          <article class="helpdeskImpactLegacy__card">
            <span class="helpdeskImpactLegacy__icon" aria-hidden="true">
              <img src="/images/home/icons/teal/ShieldCheckered.svg" alt="" loading="lazy" decoding="async">
            </span>
            <h3><strong>Reduced downtime</strong> with continuous coverage and proactive management</h3>
          </article>
          <article class="helpdeskImpactLegacy__card helpdeskImpactLegacy__card--last">
            <span class="helpdeskImpactLegacy__icon" aria-hidden="true">
              <img src="/images/home/icons/teal/TrendUp.svg" alt="" loading="lazy" decoding="async">
            </span>
            <h3><strong>Improved operational insight</strong> through trend analysis and transparent reporting</h3>
          </article>
        </div>
      </div>
      <style>
        .helpdeskImpactLegacy{
          background:radial-gradient(ellipse at top,#050505 0%,#000 80%);
          color:#fff;
          font-family:Inter,system-ui,sans-serif;
          padding:80px 0;
        }
        .helpdeskImpactLegacy__shell{
          width:100%;
          margin:0 auto;
          display:grid;
          grid-template-columns:1fr 1fr;
          border:1px solid rgba(71,85,105,.55);
          border-radius:16px;
          overflow:hidden;
        }
        .helpdeskImpactLegacy__intro{
          padding:48px;
          border-right:1px solid rgba(71,85,105,.45);
          display:flex;
          flex-direction:column;
          gap:16px;
        }
        .helpdeskImpactLegacy__intro h2{
          font-size:32px;
          font-weight:700;
          margin:0;
        }
        .helpdeskImpactLegacy__intro p,
        .helpdeskImpactLegacy__intro li{
          color:rgba(255,255,255,.8);
          line-height:1.65;
        }
        .helpdeskImpactLegacy__list{
          margin:0 0 8px 20px;
          padding:0;
          line-height:1.7;
          list-style:disc;
        }
        .helpdeskImpactLegacy__grid{
          display:grid;
          grid-template-rows:repeat(4,1fr);
        }
        .helpdeskImpactLegacy__card{
          padding:32px;
          border-bottom:1px solid rgba(71,85,105,.35);
          display:flex;
          gap:18px;
          align-items:center;
        }
        .helpdeskImpactLegacy__card--last{
          border-bottom:none;
        }
        .helpdeskImpactLegacy__icon{
          display:flex;
          align-items:center;
          justify-content:center;
          min-width:56px;
        }
        .helpdeskImpactLegacy__icon img{
          width:56px;
          height:56px;
        }
        .helpdeskImpactLegacy__card h3{
          margin:0;
          font-size:18px;
          font-weight:200;
          line-height:1.5;
        }
        .helpdeskImpactLegacy__card strong{
          font-weight:600;
        }
        @media(max-width:1024px){
          .helpdeskImpactLegacy__shell{
            grid-template-columns:1fr;
          }
          .helpdeskImpactLegacy__intro{
            border-right:none;
            border-bottom:1px solid rgba(71,85,105,.35);
          }
        }
        @media(max-width:640px){
          .helpdeskImpactLegacy{
            padding:56px 0;
          }
          .helpdeskImpactLegacy__intro{
            padding:32px 24px;
          }
          .helpdeskImpactLegacy__grid{
            grid-template-rows:none;
          }
          .helpdeskImpactLegacy__card{
            flex-direction:column;
            align-items:flex-start;
            gap:12px;
            padding:24px;
            border-bottom:1px solid rgba(71,85,105,.35);
          }
          .helpdeskImpactLegacy__card--last{
            border-bottom:none;
          }
          .helpdeskImpactLegacy__icon{
            min-width:40px;
          }
          .helpdeskImpactLegacy__icon img{
            width:44px;
            height:44px;
          }
        }
      </style>
    {% else %}
    <section id="proof-security-outcomes" class="ycProof text-white" style="position:relative; isolation:isolate; background:transparent;">
      <hr class="mb-20 border-slate-700">
      {% if proof.customHtml %}
      {{ proof.customHtml | safe }}
      {% else %}
      <h2 class="mt-4 mb-3 text-3xl font-semibold text-white font-mont fade-item delay-0">{{ proof.title | safe }}</h2>
      {% if proof.sub %}
      <h3 class="mb-12 text-[18px] font-light text-slate-200 fade-item delay-0">{{ proof.sub | safe }}</h3>
      {% endif %}
      <div class="ycCards grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6">
        {% for c in proof.cards %}
        <article class="ycCard fade-item delay-{{ loop.index0 * 100 }}">
          {% if c.icon %}
          <div class="ycCard__icon" aria-hidden="true">
            <img src="{{ c.icon }}" alt="">
          </div>
          {% endif %}
          <h3 class="ycCard__title">{{ c.title | safe }}</h3>
          <p class="ycCard__desc">{{ c.desc | safe }}</p>
          {% if c.metrics %}
            {% for m in c.metrics %}
            <div class="ycMeter">
              <span class="ycMeter__label">{{ m.label | safe }}</span>
              <div class="ycMeter__track" aria-hidden="true">
                <span class="ycMeter__bar {% if m.color=='teal' %}ycMeter__bar--teal{% else %}ycMeter__bar--red{% endif %}" style="--val: {{ m.bar | default('60%') }};"></span>
              </div>
              <div class="ycMetric {% if m.color=='teal' %}ycMetric--teal{% else %}ycMetric--red{% endif %}">{{ m.metric | safe }}</div>
            </div>
            {% endfor %}
          {% elseif c.metric and c.metricLabel %}
            <div class="ycMeter">
              <span class="ycMeter__label">{{ c.metricLabel | safe }}</span>
              <div class="ycMeter__track" aria-hidden="true">
                <span class="ycMeter__bar {% if c.color=='teal' %}ycMeter__bar--teal{% else %}ycMeter__bar--red{% endif %}" style="--val: {{ c.bar | default('60%') }};"></span>
              </div>
              <div class="ycMetric {% if c.color=='teal' %}ycMetric--teal{% else %}ycMetric--red{% endif %}">{{ c.metric | safe }}</div>
            </div>
          {% endif %}
          {% if c.source %}<footer class="ycCard__foot">{{ c.source | safe }}</footer>{% endif %}
        </article>
        {% endfor %}
      </div>
      <style>
        .ycCards{ align-items:stretch; }
        .ycCard{ position:relative; border-radius:18px; padding:clamp(20px,2.4vw,28px); background:#000; border:1px solid rgba(102,199,232,.25); box-shadow:0 14px 38px rgba(5,12,22,.55), inset 0 1px 0 rgba(255,255,255,.05); color:#e2e8f0; display:flex; flex-direction:column; gap:1rem; height:100%; text-align:center; }
        .ycCard__icon{ width:64px; height:64px; border-radius:18px; margin:0 auto; display:grid; place-items:center; background:rgba(111,233,212,.12); border:1px solid rgba(111,233,212,.35); }
        .ycCard__icon img{ width:32px; height:32px; display:block; filter:invert(78%) sepia(18%) saturate(742%) hue-rotate(118deg) brightness(96%) contrast(101%); }
        .ycCard__title{ margin:0 0 10px; text-align:center; font-weight:800; font-size:clamp(18px,2.4vw,22px); }
        .ycCard__desc{ margin:0 0 16px; text-align:center; color:#cbd5e1; font-size:clamp(15px,2.1vw,18px); line-height:1.65; }
        .ycMeter{ display:grid; gap:8px; justify-items:center; margin:10px 0 8px; }
        .ycMeter__label{ font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:#7dd3fc; opacity:.9; }
        .ycMeter__track{ width:100%; max-width:280px; height:10px; background:#0f172a; border-radius:999px; position:relative; overflow:hidden; }
        .ycMeter__bar{ position:absolute; left:0; top:0; bottom:0; width:0; border-radius:inherit; transition:width .8s cubic-bezier(.32,.75,.31,.97); }
        .ycCard.is-visible .ycMeter__bar{ width:var(--val, 60%); }
        .ycMeter__bar--teal{ background:linear-gradient(90deg,#6FE9D4 0%, #00BBA7 100%); }
        .ycMeter__bar--red{ background:linear-gradient(90deg,#fb7185 0%, #ef4444 100%); }
        .ycMetric{ font-weight:800; font-size:clamp(18px,2.8vw,22px); }
        .ycMetric--teal{ color:#6FE9D4; }
        .ycMetric--red{ color:#f87171; }
        .ycCard__foot{ margin-top:auto; text-align:center; font-size:12px; letter-spacing:.18em; color:#94a3b8; opacity:.9; width:100%; }
      </style>
      {% endif %}
      <script>
        (function(){
          function ready(fn){
            if (document.readyState === 'loading'){
              document.addEventListener('DOMContentLoaded', fn, { once:true });
            } else {
              fn();
            }
          }
          ready(function(){
            var section = document.getElementById('proof-security-outcomes');
            if (!section) return;
            var cards = Array.prototype.slice.call(section.querySelectorAll('.ycCard'));
            if (window.registerFadeItems) {
              window.registerFadeItems(cards);
            }
            if (!cards.length) return;

            function activateAll(){
              cards.forEach(function(card){ card.classList.add('is-visible'); });
            }

            if (!('IntersectionObserver' in window)){
              activateAll();
              return;
            }

            var observer = new IntersectionObserver(function(entries){
              entries.forEach(function(entry){
                if (entry.isIntersecting){
                  entry.target.classList.add('is-visible');
                  observer.unobserve(entry.target);
                }
              });
            }, { root:null, threshold:0.35 });

            cards.forEach(function(card){ observer.observe(card); });
          });
        })();
      </script>
    </section>
    {% endif %}
    {% endif %}

    {% set caseStudyAllowPlaceholders = true %}
    {% if product == 'Cyber Security' %}
      {% set caseStudyFeed = '/resources/?tag=Cybersecurity&type=Case+Study' %}
      {% set caseStudyTags = ['Cybersecurity'] %}
      {% set caseStudies = [
        {title:'Case Study: Behavioral Health Services Organization', description:'Advancing security maturity and SOC 2 readiness across a multi-site healthcare environment with comprehensive IT management.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/behavioral-health-services-organization-case-study.png', url:'/resources/behavioral-health-services-organization-case-study/', dateDisplay:'Dec 2, 2025', readTime:4},
        {title:'Case Study: Nationwide Disaster Recovery and Reconstruction Company', description:'Standardizing and securing IT across 70+ locations while integrating acquisitions and maintaining enterprise-grade security.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/ati-restoration-case-study.png', url:'/resources/nationwide-disaster-recovery-and-reconstruction-company-case-study/', dateDisplay:'Nov 17, 2025', readTime:2},
        {title:'Case Study: California-Based Law Firm', description:'Building a secure, modern legal practice on a solid IT foundation with full technology management since 2011.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/schonbuch-hallissy-llp-case-study.png', url:'/resources/california-based-law-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2}
      ] %}
    {% elseif product == 'Managed Networks' %}
      {% set caseStudyFeed = '/resources/?tag=Network+Infrastructure%2CNetwork&type=Case+Study' %}
      {% set caseStudyTags = ['Network', 'Network Infrastructure'] %}
      {% set caseStudies = [
        {title:'Case Study: Behavioral Health Services Organization', description:'Advancing security maturity and SOC 2 readiness across a multi-site healthcare environment with comprehensive IT management.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/behavioral-health-services-organization-case-study.png', url:'/resources/behavioral-health-services-organization-case-study/', dateDisplay:'Dec 2, 2025', readTime:4},
        {title:'Case Study: California-Based Law Firm', description:'Building a secure, modern legal practice on a solid IT foundation with full technology management since 2011.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/schonbuch-hallissy-llp-case-study.png', url:'/resources/california-based-law-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2},
        {title:'Case Study: Architectural Firm', description:'Helping a one-person IT team be everywhere, all at once for 190 employees across four offices.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/dg-architects-case-study.png', url:'/resources/architectural-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2}
      ] %}
    {% elseif product == 'Cloud & Systems Services' %}
      {% set caseStudyFeed = '/resources/?tag=Cloud+Services%2CCloud+Infrastructure%2CCloud+Migration&type=Case+Study' %}
      {% set caseStudyTags = ['Cloud', 'Cloud Services', 'Cloud Infrastructure', 'Cloud Migration'] %}
      {% set caseStudies = [
        {title:'Case Study: Nationwide Disaster Recovery and Reconstruction Company', description:'Standardizing and securing IT across 70+ locations while integrating acquisitions and maintaining enterprise-grade security.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/ati-restoration-case-study.png', url:'/resources/nationwide-disaster-recovery-and-reconstruction-company-case-study/', dateDisplay:'Nov 17, 2025', readTime:2},
        {title:'Case Study: Commercial Laundry Services Provider', description:'Transforming IT operations with Microsoft Cloud and modern device management. Learn how a commercial laundry services provider relies on L3 Networks as their complete IT department since 2017.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/republic-master-chefs-case-study.png', url:'/resources/commercial-laundry-services-provider-case-study/', dateDisplay:'Nov 7, 2025', readTime:2},
        {title:'Case Study: California-Based Law Firm', description:'Building a secure, modern legal practice on a solid IT foundation with full technology management since 2011.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/schonbuch-hallissy-llp-case-study.png', url:'/resources/california-based-law-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2}
      ] %}
    {% elseif product == 'User & Device Management' %}
      {% set caseStudyAllowPlaceholders = false %}
      {% set caseStudyFeed = '/resources/?tag=Managed+IT%2CService+Desk%2CDevice+Management%2CAi-Enhanced+Helpdesk%2CHelpdesk&type=Case+Study' %}
      {% set caseStudyTags = ['Managed IT','Device Management', 'Device', 'Endpoint Management', 'Service Desk', 'Ai-Enhanced Helpdesk', 'Helpdesk'] %}
      {% set caseStudies = [
        {title:'Case Study: Commercial Laundry Services Provider', description:'Transforming IT operations with Microsoft Cloud and modern device management. Learn how a commercial laundry services provider relies on L3 Networks as their complete IT department since 2017.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/republic-master-chefs-case-study.png', url:'/resources/commercial-laundry-services-provider-case-study/', dateDisplay:'Nov 7, 2025', readTime:2},
        {title:'Case Study: California-Based Law Firm', description:'Building a secure, modern legal practice on a solid IT foundation with full technology management since 2011.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/schonbuch-hallissy-llp-case-study.png', url:'/resources/california-based-law-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2},
        {title:'Case Study: Architectural Firm', description:'Helping a one-person IT team be everywhere, all at once for 190 employees across four offices.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/dg-architects-case-study.png', url:'/resources/architectural-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2}
      ] %}
    {% elseif product == 'Professional Services' %}
      {% set caseStudyFeed = '/resources/?type=Case+Study' %}
      {% set caseStudyTags = [] %}
      {% set caseStudies = [
        {title:'Case Study: Nationwide Disaster Recovery and Reconstruction Company', description:'Standardizing and securing IT across 70+ locations while integrating acquisitions and maintaining enterprise-grade security.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/ati-restoration-case-study.png', url:'/resources/nationwide-disaster-recovery-and-reconstruction-company-case-study/', dateDisplay:'Nov 17, 2025', readTime:2},
        {title:'Case Study: Commercial Laundry Services Provider', description:'Transforming IT operations with Microsoft Cloud and modern device management. Learn how a commercial laundry services provider relies on L3 Networks as their complete IT department since 2017.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/republic-master-chefs-case-study.png', url:'/resources/commercial-laundry-services-provider-case-study/', dateDisplay:'Nov 7, 2025', readTime:2},
        {title:'Case Study: California-Based Law Firm', description:'Building a secure, modern legal practice on a solid IT foundation with full technology management since 2011.', type:'Case Study', image:'https://l3networks.com/images/thumbnails/schonbuch-hallissy-llp-case-study.png', url:'/resources/california-based-law-firm-case-study/', dateDisplay:'Nov 6, 2025', readTime:2}
      ] %}
    {% else %}
      {% set caseStudyFeed = '' %}
      {% set caseStudyTags = [] %}
      {% set caseStudies = [
        {title:'Stabilizing Fast-Growing Operations', description:'How a multi-site client regained reliability and reduced ticket volume by 38% within 90 days.', type:'Case Study', image:'/images/resources/case-studies/case-study-ops.webp', url:'/resources/', dateDisplay:'Aug 2024', readTime:4},
        {title:'Compliance Without Slowdowns', description:'A healthcare team met audit requirements while improving response times using Elevate.', type:'Case Study', image:'/images/resources/case-studies/case-study-compliance.webp', url:'/resources/', dateDisplay:'Jul 2024', readTime:5},
        {title:'Network Resilience Upgraded', description:'How we delivered measurable uptime gains and clearer ownership across vendors.', type:'Case Study', image:'/images/resources/case-studies/case-study-network.webp', url:'/resources/', dateDisplay:'Jun 2024', readTime:5}
      ] %}
    {% endif %}
    <div class="pt-32">&nbsp;</div>
    <hr class="mb-20 border-slate-700">
    <section id="case-studies-section" class="caseStudiesBlock fade-item delay-0">
      <h2 class="caseStudies__title font-mont">Explore Case Studies</h2>
      <div class="caseStudies__grid">
        {% for cs in caseStudies %}
        <article class="caseCard fade-item delay-{{ loop.index0 * 80 }}">
          <a href="{{ cs.url | default('/resources/') }}" class="caseCard__thumb" aria-label="{{ cs.title }}">
            <img src="{{ cs.image | default('/images/about/leadership.webp') }}" alt="{{ cs.title }}" loading="lazy" decoding="async">
          </a>
          <a href="{{ cs.url | default('/resources/') }}" class="caseCard__body caseCard__body--link">
            <p class="caseCard__type">{{ cs.type | default('Case Study') }}</p>
            <h3 class="caseCard__title">{{ cs.title }}</h3>
            <p class="caseCard__desc">{{ cs.description }}</p>
            <p class="caseCard__meta">
              {% if cs.dateDisplay %}<span>{{ cs.dateDisplay }}</span>{% endif %}
              {% if cs.readTime %}<span>{{ cs.readTime }} min read</span>{% endif %}
            </p>
            {% if cs.tags %}
            <div class="caseCard__tags">
              {% for tag in cs.tags %}
              <span class="caseTag">{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}
            {% if cs.type == 'Resources' %}
            <span class="caseCard__ctaLink">Explore all resources</span>
            {% endif %}
          </a>
        </article>
        {% endfor %}
      </div>
      <div class="caseStudies__ctaWrap">
        <a href="https://l3networks.com/resources/?type=Case+Study" class="caseStudies__cta">
          <span>View All Case Studies</span>
          <img class="heroBookArrow" src="/images/icons/ArrowUpRightWhite.svg" alt="">
        </a>
      </div>
    </section>
    <style>
      .caseStudiesBlock{
        margin-top:0;
        margin-bottom:8px;
        display:flex;
        flex-direction:column;
        gap:20px;
      }
      .caseStudies__title{
        margin:0 0 6px;
        font-size:clamp(26px,3vw,34px);
        font-weight:700;
      }
      .caseStudies__title + .caseStudies__grid{
        margin-top:18px;
      }
      .caseStudies__grid{
        display:grid;
        grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));
        gap:clamp(18px,2.6vw,28px);
      }
      .caseCard{
        background:#000;
        border:1px solid rgba(148,163,184,.35);
        border-radius:18px;
        overflow:hidden;
        display:flex;
        flex-direction:column;
        box-shadow:0 22px 55px rgba(2,6,23,.45);
        transition:transform .32s cubic-bezier(.22,.61,.36,1), box-shadow .32s cubic-bezier(.22,.61,.36,1), border-color .32s ease;
      }
      .caseCard:hover{
        box-shadow:0 36px 80px rgba(2,6,23,.58);
        border-color:rgba(148,163,184,.5);
        transform:translateY(-3px);
      }
      .caseCard__thumb{
        display:block;
        aspect-ratio:16/9;
        background:#0f172a;
        overflow:hidden;
      }
      .caseCard__thumb img{
        width:100%;
        height:100%;
        object-fit:cover;
        display:block;
        transition:transform .36s cubic-bezier(.22,.61,.36,1);
      }
      .caseCard:hover .caseCard__thumb img{
        transform:scale3d(1.02,1.02,1);
      }
      .caseCard__body{
        padding:clamp(20px,2.8vw,30px);
        display:flex;
        flex-direction:column;
        gap:10px;
        text-decoration:none;
      }
      .caseCard__body--link{
        color:inherit;
        cursor:pointer;
      }
      .caseCard__type{
        margin:0;
        color:#94a3b8;
        font-size:12px;
        letter-spacing:.08em;
        text-transform:uppercase;
        font-weight:700;
      }
      .caseCard__title{
        margin:0;
        color:#f8fafc;
        font-size:18px;
        font-weight:700;
        line-height:1.35;
      }
      .caseCard__desc{
        margin:0;
        color:#94a3b8;
        font-size:14px;
        line-height:1.55;
      }
      .caseCard__meta{
        margin:6px 0 0;
        display:flex;
        gap:12px;
        color:#cbd5e1;
        font-size:12px;
        letter-spacing:.02em;
      }
      .caseCard__tags{
        display:flex;
        flex-wrap:wrap;
        gap:8px;
        margin-top:10px;
      }
      .caseTag{
        display:inline-flex;
        align-items:center;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid rgba(148,163,184,.35);
        color:#e2e8f0;
        font-size:12px;
        background:rgba(255,255,255,.04);
      }
      .caseStudies__ctaWrap{
        display:flex;
        justify-content:center;
        margin-top:22px;
      }
      .caseStudies__cta{
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:12px 24px;
        border-radius:999px;
        background:#14b8a6;
        color:#ffffff;
        font-family:'Inter',sans-serif;
        font-size:17px;
        line-height:1.3;
        font-weight:700;
        text-decoration:none;
        box-shadow:none;
        transition:transform .18s ease, background .18s ease;
      }
      .caseStudies__cta:hover,
      .caseStudies__cta:focus-visible{
        transform:translateY(-1px);
        background:#0d9488;
        box-shadow:none;
      }
      .caseStudies__cta .heroBookArrow{
        transition:transform .22s ease;
      }
      .caseStudies__cta:hover .heroBookArrow,
      .caseStudies__cta:focus-visible .heroBookArrow{
        transform:translate(2px,-2px) scale(1.05);
      }
      @media(max-width:768px){
        .caseStudies__grid{grid-template-columns:repeat(auto-fit, minmax(220px,1fr));}
        .caseStudies__ctaWrap{justify-content:center;}
        .caseStudies__title{text-align:center;}
      }
    </style>
    {% if caseStudyFeed %}
    <script>
      (function(){
        var section=document.getElementById('case-studies-section');
        if(!section) return;
        var grid=section.querySelector('.caseStudies__grid');
        if(!grid) return;
        var feed="{{ caseStudyFeed or '' }}";
        if(!feed) return;
        var allowedTags={{ caseStudyTags | dump | default('[]') }};
        if(!Array.isArray(allowedTags)) allowedTags=[];
        fetch(feed).then(function(res){ return res.text(); }).then(function(html){
          var match=html.match(/window\.resources\s*=\s*(\[\s*[\s\S]*?\]);/);
          if(!match) return;
          var arrStr=match[1];
          var resources;
          try{
            resources=(new Function('return ' + arrStr))();
          }catch(e){
            return;
          }
          if(!Array.isArray(resources)) return;
          var allowAll = !allowedTags.length;
          var items=resources.filter(function(r){
            return r && r.type === 'Case Study' && Array.isArray(r.tags) && (allowAll || r.tags.some(function(t){ return allowedTags.indexOf(t) !== -1; }));
          });
          var allowPlaceholders = {{ caseStudyAllowPlaceholders | default(true) | dump }};
          var placeholders = allowPlaceholders ? [
            { title:'Case Study Coming Soon', description:'More outcomes are being added shortly. Check back for the latest results.', url: feed || '/resources/', thumbnail:'/images/about/leadership.webp', type:'Resources' },
            { title:'Case Study Coming Soon', description:'More outcomes are being added shortly. Check back for the latest results.', url: feed || '/resources/', thumbnail:'/images/about/leadership.webp', type:'Resources' }
          ] : [];
          while(items.length < 3 && placeholders.length){
            items.push(placeholders.shift());
          }
          if(!items.length) return;
          items.sort(function(a,b){ return new Date(b.date) - new Date(a.date); });
          grid.innerHTML='';
          items.slice(0,3).forEach(function(cs, idx){
            var article=document.createElement('article');
            article.className='caseCard fade-item delay-' + (idx*80);
            var thumb=cs.thumbnail || '/images/about/leadership.webp';
            var url=cs.url || '/resources/';
            var type=cs.type || 'Case Study';
            var readTime=cs.readTime ? (cs.readTime + ' min read') : '';
            var dateParts=[];
            if (cs.date){
              var d=new Date(cs.date);
              if(!isNaN(d.getTime())){
                var opts={month:'short', day:'numeric', year:'numeric'};
                dateParts.push(d.toLocaleDateString('en-US', opts));
              }
            }
            var metaParts=dateParts;
            if (readTime) metaParts.push(readTime);
            article.innerHTML=[
              '<a href=\"'+url+'\" class=\"caseCard__thumb\" aria-label=\"'+(cs.title||'Case Study')+'\">',
              '<img src=\"'+thumb+'\" alt=\"'+(cs.title||'Case Study')+'\" loading=\"lazy\" decoding=\"async\">',
              '</a>',
              '<div class=\"caseCard__body\">',
              '<p class=\"caseCard__type\">'+type+'</p>',
              '<h3 class=\"caseCard__title\">'+(cs.title||'Case Study')+'</h3>',
              '<p class=\"caseCard__desc\">'+(cs.description||'')</p>',
              '<p class=\"caseCard__meta\">'+metaParts.join(' Â· ')+'</p>',
              '</div>'
            ].join('');
            grid.appendChild(article);
          });
        }).catch(function(){});
      })();
    </script>
    {% endif %}
    <div class="pt-32">&nbsp;</div>

    {# <div class="w-10 h-2 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    <hr class="mb-20 border-slate-700">
    <h2 class="mt-4 mb-3 text-3xl font-semibold text-white font-mont fade-item delay-0">{{ vendorsTitle }}</h2>
    <h3 class="mb-12 text-[18px] font-light text-slate-200 fade-item delay-0">{{ vendorsBody }}</h3>

    <div class="grid grid-cols-3 gap-8 md:grid-cols-6 fade-item delay-200">
      {% for logo in vendorsLogos %}
        <img class="block col-span-1" src="{{ logo.src }}" alt="{{ logo.alt }}">
      {% endfor %}
    </div>

  </article>
  </div>
</main> 

{# <div class="h-24 bg-black"></div> #}

{% include "partials/footer.html" %}
{% endblock %}
