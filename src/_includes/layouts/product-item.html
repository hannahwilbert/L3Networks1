{% extends "layouts/base.html" %}

{% block content %}

{# Hero Section #}
<section style="background-image: url('/images/products/{{product|slug}}.webp');" class="relative w-full px-6 pt-32 text-white bg-center bg-no-repeat bg-cover md:px-10 md:pt-16">
  <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent"></div>
  <div class="container relative max-w-screen-xl px-0 pb-20 text-left md:pb-32 md:px-0 md:mx-auto md:py-48">
    <div class="flex gap-0">
      <span class="xflex-shrink-0">
        <h1 class="mb-4 text-3xl font-semibold tracking-tight md:text-6xl font-mont">{{ mainTitle | safe }}</h1>
        <p class="text-xl font-light md:text-2xl">{{ subtitle }}</p>
      </span>
      {# <!-- <div class="relative w-full max-w-[540px] cursor-pointer" onclick="this.innerHTML='<iframe class=\'w-full h-64\' src=\'https://www.youtube.com/embed/0lmoAAFXy3A?autoplay=1&rel=0&controls=1&modestbranding=1\' frameborder=\'0\' allow=\'autoplay; encrypted-media\' allowfullscreen></iframe>'">
        <img src="/path-to-your-custom-thumbnail.jpg" alt="Custom Thumbnail" class="object-cover w-full h-64 rounded-lg">
        <div class="absolute inset-0 flex items-center justify-center bg-black border border-slate-900">
          <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z" />
          </svg>
        </div>
      </div> -->
      <!-- <div class="w-full">
        <iframe 
  width="560" 
  height="315" 
  src="https://www.youtube.com/embed/0lmoAAFXy3A?si=xnU1fO034D2kdrIj&rel=0&controls=0&modestbranding=1" 
  title="YouTube video player" 
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
  referrerpolicy="strict-origin-when-cross-origin" 
  allowfullscreen>
</iframe>
      </div> --> #}
    </div>
    <button>
      <a href="/book-appointment/" class="block w-auto px-6 py-2.5 mx-auto text-lg font-semibold text-white transition-all ease-in-out bg-teal-500 rounded-full hover:bg-teal-600 mt-8">
        <div class="flex items-center gap-2">Book An Appointment <img src="/images/icons/ArrowUpRightWhite.svg" alt="Book An Appointment"></div>
      </a>
    </button>
  </div>
</section>


{# Main Content #}
<main class="px-3 py-24 text-white bg-black md:px-8 2xl:px-0">

  <nav class="container flex w-full h-full max-w-screen-xl mx-auto text-slate-200 fade-item delay-0" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
      <li class="inline-flex items-center">
        <a href="/" class="inline-flex items-center text-sm font-medium text-slate-300 hover:text-slate-500">
          <svg class="w-3 h-3 me-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z" />
          </svg>
          Home
        </a>
      </li>
      <li>
        <div class="flex items-center">
          <svg class="block w-3 h-3 mx-1 text-slate-300 rtl:rotate-180 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
          </svg>
          <a href="#" class="text-sm font-medium text-slate-300 ms-1 hover:text-slate-500 md:ms-2">Solutions</a>
        </div>
      </li>
      <li aria-current="page">
        <div class="flex items-center">
          <svg class="w-3 h-3 mx-1 text-slate-300 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
          </svg>

          <script>
            window.navSolutions = {
              items: [
                {% for main in navSolutions.items %}
            { text: "{{ main.text | safe }}", url: "{{ main.url }}" },
            {% endfor %}
                ]
              };
          </script>

          <div x-data="{ selected: '{{ page.url }}', open: false }" class="relative">
            <button @click="open = !open" class="flex items-center justify-between w-full px-4 py-2 text-sm text-left text-teal-500 bg-transparent border-none cursor-pointer focus:outline-none">
              <span x-text="selected ? window.navSolutions.items.find(item => item.url === selected).text : 'Select a Product'"></span>
              <svg class="w-4 h-4 ml-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </button>

            <div x-ref="dropdown" x-show="open" @click.away="open = false" class="absolute z-10 md:min-w-[250px] mt-1 border rounded-md shadow-lg bg-slate-800 border-slate-800" x-init="() => {
                  $watch('open', value => {
                    if (value) {
                      anime({
                        targets: $refs.dropdown,
                        opacity: [0, 1],
                        translateY: [-10, 0],
                        duration: 300,
                        easing: 'easeOutQuad'
                      });
                    } else {
                      anime({
                        targets: $refs.dropdown,
                        opacity: [1, 0],
                        translateY: [0, -10],
                        duration: 300,
                        easing: 'easeInQuad',
                        complete: () => {
                          $refs.dropdown.style.display = 'none';
                        }
                      });
                    }
                  });
                }">
              <template x-for="main in window.navSolutions.items" :key="main.url">
                <div @click="selected = main.url; window.location.href = main.url; open = false;" class="px-4 py-2 text-sm cursor-pointer text-slate-200 hover:bg-slate-700"
                  :class="{ 'bg-slate-900': selected === main.url }">
                  <span x-text="main.text"></span>
                </div>
              </template>
            </div>
          </div>
        </div>
      </li>
    </ol>
  </nav>

  <article class="container max-w-screen-xl mx-auto">
    {# Product Overview #}

    {# <div class="w-10 h-2 mt-24 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    <hr class="mt-10 mb-16 border-slate-700">
    <h2 class="mt-4 mb-3 text-3xl font-semibold font-mont text-center mx-auto md:text-4xl">{{ prodtitle }}</h2>
    <h3 class="mb-12 text-base font-light text-slate-300 text-center max-w-3xl mx-auto leading-relaxed">{{ prodbody }}</h3>
    
    <style>
      .fade-item{opacity:0; transform:translateY(24px); transition:opacity .65s cubic-bezier(.32,.75,.31,.97), transform .65s cubic-bezier(.32,.75,.31,.97); will-change:opacity,transform;}
      .fade-item.is-visible{opacity:1; transform:translateY(0);}
      .fade-item.delay-0{transition-delay:0s;}
      .fade-item.delay-100{transition-delay:.1s;}
      .fade-item.delay-200{transition-delay:.2s;}
      .fade-item.delay-300{transition-delay:.3s;}
      .fade-item.delay-400{transition-delay:.4s;}
      .fade-item.delay-500{transition-delay:.5s;}
    </style>

    <style>
      .valuePropsWrap{
        margin-bottom:clamp(40px,8vw,72px);
      }
      .valuePropsPanel{
        position:relative;
        display:grid;
        grid-template-columns:repeat(2,minmax(0,1fr));
        background:#000;
        border:1px solid rgba(255,255,255,.18);
        border-radius:18px;
        box-shadow:0 30px 55px rgba(0,0,0,.5);
        overflow:hidden;
      }
      .valuePropsPanel::before,
      .valuePropsPanel::after{
        content:"";
        position:absolute;
        background:rgba(255,255,255,.18);
        pointer-events:none;
      }
      .valuePropsPanel::before{
        width:1px;
        top:0;
        bottom:0;
        left:50%;
        transform:translateX(-0.5px);
      }
      .valuePropsPanel::after{
        height:1px;
        left:0;
        right:0;
        top:50%;
        transform:translateY(-0.5px);
      }
      .valuePropsCard{
        position:relative;
        padding:clamp(22px,4vw,32px);
        display:flex;
        flex-direction:column;
        gap:clamp(10px,2vw,14px);
      }
      .valuePropsIcon{
        width:40px;
        height:40px;
      }
      .valuePropsHeading{
        font-size:clamp(20px,2.4vw,24px);
        font-weight:800;
        letter-spacing:-0.01em;
        color:#00BBA7;
      }
      .valuePropsCopy{
        color:rgba(226,232,240,.8);
        font-size:clamp(14px,1.6vw,15.5px);
        line-height:1.65;
      }
      @media (max-width: 767px){
        .valuePropsPanel{
          grid-template-columns:1fr;
        }
        .valuePropsPanel::before,
        .valuePropsPanel::after{
          display:none;
        }
        .valuePropsCard + .valuePropsCard{
          border-top:1px solid rgba(255,255,255,.18);
        }
      }
    </style>

    <section class="valuePropsWrap fade-item delay-0">
      <div class="valuePropsPanel">
        {% for prop in valueProps %}
        <article class="valuePropsCard fade-item delay-{{ loop.index0 * 100 }}">
          <img src="{{ prop.icon }}" alt="{{ prop.title }}" class="valuePropsIcon" aria-hidden="true" loading="lazy" decoding="async">
          <h3 class="valuePropsHeading font-mont">{{ prop.title }}</h3>
          <p class="valuePropsCopy">{{ prop.description }}</p>
        </article>
        {% endfor %}
      </div>
    </section>

    

    <div class="pt-32">&nbsp;</div>

    {# <div class="w-10 h-2 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    <hr class="mb-16 border-slate-700">
    <div class="mx-4 md:mx-0 md:max-w-lg fade-item delay-0" style="margin-top:12px;">
      <h2 class="mb-2 text-3xl font-semibold text-white font-mont">
        Comprehensive Cybersecurity Solutions<br class="hidden md:block">
        Tailored to Your Business
      </h2>
      <p class="mb-0 text-[18px] font-light text-slate-200 fade-item delay-100">{{ keyprodsBody | replace("control and", "control<br class='hidden md:block'>and") | safe }}</p>
    </div>

    {% raw %}
<style>
  #cybersec-section{background:#000;padding:clamp(20px,6vh,56px) 0;color:var(--ink,#fff);}
  #cybersec-section .wrap{width:min(1200px,100%)}
  #cybersec-section .wrap{margin:0!important;padding:0!important;}
  #cybersec-section .hdr h2{font-size:clamp(24px,3vw,28px);line-height:1.15;letter-spacing:-.015em;margin:0 0 12px;font-weight:800;color:#fff;}
  #cybersec-section .hdr p{margin:0;color:rgba(255,255,255,.72);max-width:60ch;}
  #cybersec-section .content{display:grid;grid-template-columns:1fr;gap:20px;margin-top:0;max-width:1200px;margin-left:auto;margin-right:auto;}
  #cybersec-section .filters{order:1;position:-webkit-sticky;position:sticky;top:0;z-index:3;align-self:start;background:#000;padding-top:64px;padding-bottom:16px;}
  #cybersec-section .filters__panel{padding:16px;border-radius:16px;background:#050505;}
  #cybersec-section .cards{order:2;width:100%;}
  @media (min-width:1024px){
    #cybersec-section .content{grid-template-columns:2fr 1fr;gap:32px;}
    #cybersec-section .filters{order:2;top:120px;background:transparent;padding-top:0;padding-bottom:0;}
    #cybersec-section .cards{order:1;}
    #cybersec-section .filters__panel{background:rgba(0,0,0,.92);backdrop-filter:blur(8px);}
    #cybersec-section .filters__group{flex-direction:column;flex-wrap:nowrap;gap:8px;max-width:320px;}
  }
  #cybersec-section .cards{display:grid;grid-template-columns:1fr;gap:16px;}
  @media (min-width:640px){#cybersec-section .cards{grid-template-columns:1fr 1fr;gap:20px;}}
  #cybersec-section .card{background:#000;border:.5px solid rgba(255,255,255,.10);border-radius:16px;padding:16px;transition:opacity .18s ease,border-color .18s ease,border-width .18s ease;}
  #cybersec-section .card--match{border-width:1px;border-color:rgba(255,255,255,.40);box-shadow:0 8px 24px rgba(0,0,0,.35);}
  #cybersec-section .card__title{font-size:clamp(16px,2vw,18px);font-weight:600;letter-spacing:-.01em;margin:0;color:#fff;}
  #cybersec-section .card__blurb{margin:8px 0 0;color:rgba(255,255,255,.72);font-size:16px;line-height:1.6;}
  #cybersec-section .card__pills{display:flex;align-items:center;gap:8px;margin-top:14px;}
  #cybersec-section .pill-dot{display:inline-flex;align-items:center;justify-content:center;transition:opacity .15s ease,background .15s ease;}
  #cybersec-section .pill-dot:not(svg){height:6px;width:10px;border-radius:999px;background:#555;}
  #cybersec-section svg.pill-dot{display:block;background:none;}
  #cybersec-section svg.pill-dot--stabilize{width:26px;height:auto;}
  #cybersec-section svg.pill-dot--optimize{width:26px;height:auto;}
  #cybersec-section svg.pill-dot--transform{width:26px;height:auto;}
  #cybersec-section .pill-dot--on.pill-dot--stabilize:not(svg){background:#ff6a3d;}
  #cybersec-section .pill-dot--on.pill-dot--optimize:not(svg){background:#3c52ff;}
  #cybersec-section .pill-dot--on.pill-dot--transform:not(svg){background:#00bba7;}
  #cybersec-section .filters__lead{color:rgba(255,255,255,.72);font-size:16px;line-height:1.6;margin:0 0 8px;}
  #cybersec-section .filters__group{display:flex;flex-direction:column;gap:8px;max-width:320px;}
  #cybersec-section .filter-btn{background:transparent;border:none;text-align:left;padding:10px 12px;border-radius:10px;display:flex;align-items:center;gap:12px;font-weight:800;font-size:clamp(16px,2vw,18px);cursor:pointer;transition:background .12s ease;color:#fff;}
  #cybersec-section .filter-btn[data-level="stabilize"]{color:#ff6a3d;}
  #cybersec-section .filter-btn[data-level="optimize"]{color:#3c52ff;}
  #cybersec-section .filter-btn[data-level="transform"]{color:#00bba7;}
  #cybersec-section .filter-btn:hover{background:rgba(255,255,255,.05);}
  #cybersec-section .filter-btn[aria-pressed="true"]{background:rgba(255,255,255,.05);}
  #cybersec-section .filter-dot{display:inline-flex;align-items:center;justify-content:center;}
  #cybersec-section .filter-dot:not(svg){height:6px;width:10px;border-radius:999px;}
  #cybersec-section svg.filter-dot{display:block;flex-shrink:0;}
  #cybersec-section svg.filter-dot--stabilize{width:26px;height:auto;}
  #cybersec-section svg.filter-dot--optimize{width:26px;height:auto;}
  #cybersec-section svg.filter-dot--transform{width:26px;height:auto;}
  #cybersec-section .filter-dot--stabilize rect,
  #cybersec-section .filter-dot--optimize path,
  #cybersec-section .filter-dot--transform circle{transition:fill .15s ease;}
  #cybersec-section .filter-btn[data-level="stabilize"] .filter-dot:not(svg){background:#ff6a3d;}
  #cybersec-section .filter-btn[data-level="optimize"] .filter-dot:not(svg){background:#3c52ff;}
  #cybersec-section .filter-btn[data-level="transform"] .filter-dot:not(svg){background:#00bba7;}
  #cybersec-section .cards--filtered .card{opacity:.2;}
  #cybersec-section .cards--filtered .card.card--visible{opacity:1;}
</style>
{% endraw %}
<section id="cybersec-section" aria-label="Comprehensive Cybersecurity Solutions">
  <div class="wrap">
    <div class="content">
      <div class="cards" id="cards" aria-live="polite"></div>
      <aside class="filters fade-item delay-200" aria-label="Service level filters">
        <div class="filters__panel">
          <p class="filters__lead">All of our services are built around our Elevate framework. See where they land on your journey.</p>
          <div class="filters__group" id="filters"></div>
        </div>
      </aside>
    </div>
  </div>
</section>
<script>
(function(){
  var observer = null;
  function toArray(nodes){
    if (!nodes) return [];
    if (Array.isArray(nodes)) return nodes;
    if (nodes instanceof Element) return [nodes];
    return Array.prototype.slice.call(nodes);
  }
  function ensureObserver(){
    if (observer !== null) return observer;
    if (!('IntersectionObserver' in window)){
      observer = undefined;
      return observer;
    }
    observer = new IntersectionObserver(function(entries){
      entries.forEach(function(entry){
        if (entry.isIntersecting){
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { root:null, threshold:0.18 });
    return observer;
  }
  function register(nodes){
    var elements = toArray(nodes);
    if (!elements.length) return;
    var obs = ensureObserver();
    if (!obs){
      elements.forEach(function(el){
        if (!el || el.dataset.fadeInit === '1') return;
        el.dataset.fadeInit = '1';
        el.classList.add('is-visible');
      });
      return;
    }
    elements.forEach(function(el){
      if (!el || el.dataset.fadeInit === '1') return;
      el.dataset.fadeInit = '1';
      obs.observe(el);
    });
  }
  function ready(fn){
    if (document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', fn, { once:true });
    } else {
      fn();
    }
  }
  ready(function(){
    register(document.querySelectorAll('.fade-item'));
  });
  window.registerFadeItems = register;
})();
</script>
<script>
(function(){
  var section = document.getElementById('cybersec-section');
  if (!section) return;
  var cardsEl = section.querySelector('#cards');
  var filtersEl = section.querySelector('#filters');
  if (!cardsEl || !filtersEl) return;

  var RAW = {{ keyprods | dump | safe }};
  var SERVICES = Array.isArray(RAW) ? RAW.map(function(item){
    return {
      title: item.title || '',
      blurb: (item.paragraph || '').trim(),
      levels: Array.isArray(item.levels) ? item.levels : []
    };
  }) : [];

  var LEVELS = [
    { key: 'stabilize', label: 'Stabilize', color: '#FF6A3D' },
    { key: 'optimize', label: 'Optimize', color: '#3C52FF' },
    { key: 'transform', label: 'Transform', color: '#00BBA7' }
  ];

  var mode = 'none'; // 'none', 'stabilize', 'optimize', 'transform'

  function makePillDot(level){
    if (level === 'stabilize'){
      var stabilizeIcon = createStabilizeIcon('#525252');
      stabilizeIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return stabilizeIcon;
    }
    if (level === 'optimize'){
      var optimizeIcon = createOptimizeIcon('#525252');
      optimizeIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return optimizeIcon;
    }
    if (level === 'transform'){
      var transformIcon = createTransformIcon('#525252');
      transformIcon.setAttribute('class', 'pill-dot pill-dot--' + level);
      return transformIcon;
    }

    var span = document.createElement('span');
    span.className = 'pill-dot pill-dot--' + level;
    span.setAttribute('data-level', level);
    return span;
  }

  function cardIsActive(service){
    if (mode === 'none') return false;
    if (mode === 'transform') return true;
    if (mode === 'optimize'){
      return service.levels.includes('optimize') || service.levels.includes('stabilize');
    }
    if (mode === 'stabilize'){
      return service.levels.includes('stabilize');
    }
    return false;
  }

  function pillOn(level, service){
    if (mode === 'none') return false;
    if (mode === 'transform') return true;

    var active = cardIsActive(service);
    if (!active) return false;

    if (mode === 'stabilize') {
      return level === 'stabilize';
    }

    if (mode === 'optimize') {
      return level === 'stabilize' || level === 'optimize';
    }

    return false;
  }

  function setPillAppearance(dot, level, active){
    if (active){
      dot.classList.add('pill-dot--on');
    } else {
      dot.classList.remove('pill-dot--on');
    }

    if (dot.querySelectorAll){
      var fillTargets = dot.querySelectorAll('[data-fill-part]');
      if (fillTargets.length){
        var levelMeta = LEVELS.find(function(l){ return l.key === level; });
        var activeFill = levelMeta ? levelMeta.color : '#FFFFFF';
        var inactiveFill = '#525252';
        var targetColor = active ? activeFill : inactiveFill;
        fillTargets.forEach(function(part){
          part.setAttribute('fill', targetColor);
        });
      }
    }
  }

  function renderCards(){
    var selecting = mode !== 'none';
    cardsEl.classList.toggle('cards--filtered', selecting);
    cardsEl.innerHTML = '';

    var newCards = [];
    SERVICES.forEach(function(service, idx){
      var active = cardIsActive(service);
      var article = document.createElement('article');
      article.className = 'card';
      article.classList.add('fade-item');
      var delayClass = 'delay-' + ((idx % 4) * 100);
      article.classList.add(delayClass);
      if (!selecting || active){
        article.classList.add('card--visible');
      }
      if (selecting && active){
        article.classList.add('card--match');
      }

      var h3 = document.createElement('h3');
      h3.className = 'card__title';
      h3.textContent = service.title;

      var p = document.createElement('p');
      p.className = 'card__blurb';
      p.textContent = service.blurb;

      var pills = document.createElement('div');
      pills.className = 'card__pills';
      ['stabilize','optimize','transform'].forEach(function(level){
        var dot = makePillDot(level);
        var isActive = pillOn(level, service);
        setPillAppearance(dot, level, isActive);
        pills.appendChild(dot);
      });

      article.append(h3, p, pills);
      cardsEl.appendChild(article);
      newCards.push(article);
    });
    if (window.registerFadeItems){
      window.registerFadeItems(newCards);
    }
  }

  function createStabilizeIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '32.762');
    svg.setAttribute('viewBox', '0 0 40 32.762');
    svg.setAttribute('data-level', 'stabilize');

    var fillColor = initialFill || '#525252';
    [0, 12.1904, 24.3811].forEach(function(offset){
      var rect = document.createElementNS(svgNS, 'rect');
      rect.setAttribute('y', String(offset));
      rect.setAttribute('width', '40');
      rect.setAttribute('height', '8.38092');
      rect.setAttribute('rx', '4.19046');
      rect.setAttribute('fill', fillColor);
      rect.setAttribute('data-fill-part', '1');
      svg.appendChild(rect);
    });
    return svg;
  }

  function createOptimizeIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '39.8095');
    svg.setAttribute('viewBox', '0 0 40 39.8095');
    svg.setAttribute('data-level', 'optimize');

    var fillColor = initialFill || '#525252';
    var topPath = document.createElementNS(svgNS, 'path');
    topPath.setAttribute('d', 'M40 1.74846e-06C40 2.62644 39.4827 5.22716 38.4776 7.65367C37.4725 10.0802 35.9993 12.285 34.1421 14.1421C32.285 15.9993 30.0802 17.4725 27.6537 18.4776C25.2272 19.4827 22.6264 20 20 20C17.3736 20 14.7728 19.4827 12.3463 18.4776C9.91982 17.4725 7.71503 15.9993 5.85786 14.1421C4.00069 12.285 2.5275 10.0802 1.52241 7.65367C0.517315 5.22716 -2.2961e-07 2.62644 0 0L40 1.74846e-06Z');
    topPath.setAttribute('fill', fillColor);
    topPath.setAttribute('data-fill-part', '1');

    var bottomPath = document.createElementNS(svgNS, 'path');
    bottomPath.setAttribute('d', 'M40 19.8095C40 22.436 39.4827 25.0367 38.4776 27.4632C37.4725 29.8897 35.9993 32.0945 34.1421 33.9517C32.285 35.8088 30.0802 37.282 27.6537 38.2871C25.2272 39.2922 22.6264 39.8095 20 39.8095C17.3736 39.8095 14.7728 39.2922 12.3463 38.2871C9.91982 37.282 7.71503 35.8088 5.85786 33.9517C4.00069 32.0945 2.5275 29.8897 1.52241 27.4632C0.517315 25.0367 -2.2961e-07 22.436 0 19.8095L40 19.8095Z');
    bottomPath.setAttribute('fill', fillColor);
    bottomPath.setAttribute('data-fill-part', '1');

    svg.appendChild(topPath);
    svg.appendChild(bottomPath);
    return svg;
  }

  function createTransformIcon(initialFill){
    var svgNS = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', '40');
    svg.setAttribute('height', '40');
    svg.setAttribute('viewBox', '0 0 40 40');
    svg.setAttribute('data-level', 'transform');

    var circle = document.createElementNS(svgNS, 'circle');
    circle.setAttribute('cx', '20');
    circle.setAttribute('cy', '20');
    circle.setAttribute('r', '20');
    circle.setAttribute('fill', initialFill || '#525252');
    circle.setAttribute('data-fill-part', '1');
    svg.appendChild(circle);
    return svg;
  }

  function renderFilters(){
    filtersEl.innerHTML = '';
    LEVELS.forEach(function(level){
      var btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'filter-btn';
      btn.dataset.level = level.key;
      var isActive = mode === level.key;
      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      var dot;
      if (level.key === 'stabilize'){
        dot = createStabilizeIcon(level.color);
        dot.classList.add('filter-dot', 'filter-dot--stabilize');
      } else if (level.key === 'optimize'){
        dot = createOptimizeIcon(level.color);
        dot.classList.add('filter-dot', 'filter-dot--optimize');
      } else if (level.key === 'transform'){
        dot = createTransformIcon(level.color);
        dot.classList.add('filter-dot', 'filter-dot--transform');
      } else {
        dot = document.createElement('span');
        dot.className = 'filter-dot';
        dot.style.background = level.color;
      }
      dot.setAttribute('aria-hidden', 'true');

      var label = document.createElement('span');
      label.textContent = level.label;

      btn.append(dot, label);
      filtersEl.appendChild(btn);
    });
  }

  function setMode(newMode){
    if (mode === newMode){
      mode = 'none';
    } else if (mode === 'transform' && newMode !== 'transform'){
      mode = newMode;
    } else {
      mode = newMode;
    }
    renderFilters();
    renderCards();
  }

  filtersEl.addEventListener('click', function(evt){
    var btn = evt.target.closest('.filter-btn');
    if (!btn) return;
    setMode(btn.getAttribute('data-level'));
  });

  renderFilters();
  renderCards();
})();
</script>










    {# Optional proof section (moved below Key Products) #}
    <div class="pt-32">&nbsp;</div>
    {% if proof and proof.enabled %}
    <section id="proof-security-outcomes" class="ycProof text-white" style="position:relative; isolation:isolate; background:transparent;">
      <hr class="mb-16 border-slate-700">
      <h2 class="mx-4 mt-4 mb-3 text-3xl font-semibold text-white font-mont md:mx-0 fade-item delay-0">{{ proof.title | safe }}</h2>
      {% if proof.sub %}
      <h3 class="mx-4 mb-12 text-[18px] font-light md:mx-0 text-slate-200 fade-item delay-100">{{ proof.sub | safe }}</h3>
      {% endif %}
      <div class="ycCards grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6">
        {% for c in proof.cards %}
        <article class="ycCard fade-item delay-{{ loop.index0 * 100 }}">
          <h3 class="ycCard__title">{{ c.title | safe }}</h3>
          <p class="ycCard__desc">{{ c.desc | safe }}</p>
          {% if c.metrics %}
            {% for m in c.metrics %}
            <div class="ycMeter">
              <span class="ycMeter__label">{{ m.label | safe }}</span>
              <div class="ycMeter__track" aria-hidden="true">
                <span class="ycMeter__bar {% if m.color=='teal' %}ycMeter__bar--teal{% else %}ycMeter__bar--red{% endif %}" style="--val: {{ m.bar | default('60%') }};"></span>
              </div>
              <div class="ycMetric {% if m.color=='teal' %}ycMetric--teal{% else %}ycMetric--red{% endif %}">{{ m.metric | safe }}</div>
            </div>
            {% endfor %}
          {% else %}
            <div class="ycMeter">
              <span class="ycMeter__label">{{ c.metricLabel | safe }}</span>
              <div class="ycMeter__track" aria-hidden="true">
                <span class="ycMeter__bar {% if c.color=='teal' %}ycMeter__bar--teal{% else %}ycMeter__bar--red{% endif %}" style="--val: {{ c.bar | default('60%') }};"></span>
              </div>
              <div class="ycMetric {% if c.color=='teal' %}ycMetric--teal{% else %}ycMetric--red{% endif %}">{{ c.metric | safe }}</div>
            </div>
          {% endif %}
          {% if c.source %}<footer class="ycCard__foot">{{ c.source | safe }}</footer>{% endif %}
        </article>
        {% endfor %}
      </div>
      <style>
        .ycCards{ align-items:stretch; }
        .ycCard{ position:relative; border-radius:18px; padding:clamp(20px,2.4vw,28px); background:#000; border:1px solid rgba(102,199,232,.25); box-shadow:0 14px 38px rgba(5,12,22,.55), inset 0 1px 0 rgba(255,255,255,.05); color:#e2e8f0; display:flex; flex-direction:column; height:100%; }
        .ycCard__title{ margin:0 0 10px; text-align:center; font-weight:800; font-size:clamp(18px,2.4vw,22px); }
        .ycCard__desc{ margin:0 0 16px; text-align:center; color:#cbd5e1; font-size:clamp(15px,2.1vw,18px); line-height:1.65; }
        .ycMeter{ display:grid; gap:8px; justify-items:center; margin:10px 0 8px; }
        .ycMeter__label{ font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:#7dd3fc; opacity:.9; }
        .ycMeter__track{ width:100%; max-width:280px; height:10px; background:#0f172a; border-radius:999px; position:relative; overflow:hidden; }
        .ycMeter__bar{ position:absolute; left:0; top:0; bottom:0; width:0; border-radius:inherit; transition:width .8s cubic-bezier(.32,.75,.31,.97); }
        .ycCard.is-visible .ycMeter__bar{ width:var(--val, 60%); }
        .ycMeter__bar--teal{ background:linear-gradient(90deg,#6FE9D4 0%, #00BBA7 100%); }
        .ycMeter__bar--red{ background:linear-gradient(90deg,#fb7185 0%, #ef4444 100%); }
        .ycMetric{ font-weight:800; font-size:clamp(18px,2.8vw,22px); }
        .ycMetric--teal{ color:#6FE9D4; }
        .ycMetric--red{ color:#f87171; }
        .ycCard__foot{ margin-top:auto; text-align:center; font-size:12px; letter-spacing:.18em; color:#94a3b8; opacity:.9; width:100%; }
      </style>
      <script>
        (function(){
          function ready(fn){
            if (document.readyState === 'loading'){
              document.addEventListener('DOMContentLoaded', fn, { once:true });
            } else {
              fn();
            }
          }
          ready(function(){
            var section = document.getElementById('proof-security-outcomes');
            if (!section) return;
            var cards = Array.prototype.slice.call(section.querySelectorAll('.ycCard'));
            if (window.registerFadeItems) {
              window.registerFadeItems(cards);
            }
            if (!cards.length) return;

            function activateAll(){
              cards.forEach(function(card){ card.classList.add('is-visible'); });
            }

            if (!('IntersectionObserver' in window)){
              activateAll();
              return;
            }

            var observer = new IntersectionObserver(function(entries){
              entries.forEach(function(entry){
                if (entry.isIntersecting){
                  entry.target.classList.add('is-visible');
                  observer.unobserve(entry.target);
                }
              });
            }, { root:null, threshold:0.35 });

            cards.forEach(function(card){ observer.observe(card); });
          });
        })();
      </script>
    </section>
    {% endif %}

    <div class="pt-32">&nbsp;</div>

    {# <div class="w-10 h-2 bg-gradient-to-r from-teal-500 to-teal-400"></div> #}
    <hr class="mb-16 border-slate-700">
    <h2 class="mx-4 mt-4 mb-3 text-3xl font-semibold text-white font-mont md:mx-0 fade-item delay-0">{{ vendorsTitle }}</h2>
    <h3 class="mx-4 mb-12 text-[18px] font-light md:mx-0 text-slate-200 fade-item delay-100">{{ vendorsBody }}</h3>

    <div class="grid grid-cols-2 gap-8 md:grid-cols-6 fade-item delay-200">
      {% for logo in vendorsLogos %}
        <img class="block col-span-1" src="{{ logo.src }}" alt="{{ logo.alt }}">
      {% endfor %}
    </div>

  </article>
</main> 

{# <div class="h-24 bg-black"></div> #}

{% include "partials/footer.html" %}
{% endblock %}
